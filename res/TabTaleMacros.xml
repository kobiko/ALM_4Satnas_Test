<?xml version="1.0" ?>
<ttMacro name="toolsEndedAnimation">
    <ttMacroParams>
        <ttMacroParamDef name="$finalX"/>
        <ttMacroParamDef name="$finalY"/>
        <ttMacroParamDef name="$scaleX"/>
        <ttMacroParamDef name="$scaleY"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttSequenceGroup>
            <ttAction>
                <ttType>disableObject</ttType>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>moveToPoint</ttType>
                <ttFinalPosition x="$finalX" y="$finalY" />
                <ttActionEaseMode>easeIn</ttActionEaseMode>  
                <ttActionEaseRate>2.00</ttActionEaseRate>
                <ttActionDuration>0.5</ttActionDuration>
            </ttAction>
            <ttAction>
                <ttType>scaleXy</ttType>
                <ttActionDuration>0.5</ttActionDuration>
                <ttScaleX>$scaleX</ttScaleX>
                <ttScaleY>$scaleY</ttScaleY>
                <ttActionEaseMode>easeIn</ttActionEaseMode>  
                <ttActionEaseRate>2.00</ttActionEaseRate>
            </ttAction>
            <ttAction>
                <ttType>playSound</ttType>
                <ttFile>sounds/toolsSFX/tool_fly_back.mp3</ttFile>
                <ttVolume>0.6</ttVolume>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>enableObject</ttType>
            </ttAction>
        </ttSequenceGroup>
    </ttMacroBody>      
</ttMacro>

<ttMacro name="toolsEntrance">
    <ttMacroParams>
        <ttMacroParamDef name="$delay"/>
        <ttMacroParamDef name="$posX"/>
        <ttMacroParamDef name="$posY"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttActionsGroup> <!-- automatic -->
            <ttTrigger>automatic</ttTrigger>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>delay</ttType>
                    <ttActionDuration>$delay</ttActionDuration>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>playSound</ttType>
                    <ttFile>sounds/fly_in.mp3</ttFile>
                    <ttVolume>0.6</ttVolume>
                </ttAction>
                <ttAction>
                    <ttType>moveToPoint</ttType>
                    <ttFinalPosition x="$posX" y="$posY" />
                    <ttActionDuration>0.5</ttActionDuration>
                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>

<ttMacro name="UIOrnamentChildSparkles">
    <ttMacroParams />
    <ttMacroBody>
        <ttObjects>
            <ttObject>
                <ttImage>images/fullBlocker.png</ttImage>
                <ttBasePosition x="0.8" y="4.5" />
                <ttScale>0.6</ttScale>
                <ttType>particles</ttType>
                <ttZOrder>10</ttZOrder>
                <ttParticles>
                    <ttParticlesPlist>images/particles/subtleSparkles.plist</ttParticlesPlist>
                </ttParticles>
                <ttActionsGroup>
                    <ttTrigger>automatic</ttTrigger>
                    <ttTriggerDelay>0.2</ttTriggerDelay>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>startParticles</ttType>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
            </ttObject>
            <ttObject>
                <ttImage>images/fullBlocker.png</ttImage>
                <ttBasePosition x="7.2" y="5.5" />
                <ttScale>0.8</ttScale>
                <ttType>particles</ttType>
                <ttZOrder>10</ttZOrder>
                <ttParticles>
                    <ttParticlesPlist>images/particles/subtleSparkles.plist</ttParticlesPlist>
                </ttParticles>
                <ttActionsGroup>
                    <ttTrigger>automatic</ttTrigger>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>startParticles</ttType>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
            </ttObject>
            <ttObject>
                <ttImage>images/fullBlocker.png</ttImage>
                <ttBasePosition x="6" y="1" />
                <ttScale>0.6</ttScale>
                <ttType>particles</ttType>
                <ttZOrder>10</ttZOrder>
                <ttParticles>
                    <ttParticlesPlist>images/particles/subtleSparkles.plist</ttParticlesPlist>
                </ttParticles>
                <ttActionsGroup>
                    <ttTrigger>automatic</ttTrigger>
                    <ttTriggerDelay>0.55</ttTriggerDelay>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>startParticles</ttType>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
            </ttObject>
        </ttObjects>
    </ttMacroBody>
</ttMacro>
<!-- dress up macros-->
<ttMacro name="dressUpUnLoadAndLoadNewCategory">
    <ttMacroParams>
        <ttMacroParamDef name="$layer"/>
        <ttMacroParamDef name="$yPos"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttSequenceGroup>
             <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>bootsLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>cloaksLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>hatsLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>pantsLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>talismansLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>wandsLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>legsLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>stuffsLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>armsLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>torsosLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>headsLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>teethLayer</ttData>
            </ttAction>
            <ttAction>
                <ttType>unLoadLayer</ttType>
                <ttData>bulbsLayer</ttData>
            </ttAction>
            
            <ttAction>
                <ttType>loadLayer</ttType>
                <ttData>$layer</ttData>
                <ttBasePosition x="0" y="$yPos" />
            </ttAction>
        </ttSequenceGroup>
           
        <ttSequenceGroup>
            <ttAction>
                <ttType>sendNotification</ttType>
                <ttNotificationIdentifyer>showItemsSlider</ttNotificationIdentifyer>
            </ttAction>
        </ttSequenceGroup>
    </ttMacroBody>
</ttMacro>
<ttMacro name="dressUpCategoriesMenuItem">
    <ttMacroParams>
        <ttMacroParamDef name="$itemId"/>
        <ttMacroParamDef name="$image"/>
        <ttMacroParamDef name="$selectedimage"/>
        <ttMacroParamDef name="$categoryNo"/>
        <ttMacroParamDef name="$layerName"/>
        <ttMacroParamDef name="$dressUpItemSelectedNotification"/>
        <ttMacroParamDef name="$dressUpCategoryChangedNotification"/>
        <ttMacroParamDef name="$dressUpCategoryReplaceNotification"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttType>menuItem</ttType>
            <ttId>$itemId</ttId>
            <ttImage>$image</ttImage>
            <ttSelectedImage>$selectedimage</ttSelectedImage>
            <ttDisabledImage>$image</ttDisabledImage> 
            <ttVisible>no</ttVisible>
			<ttObjects>
				<ttObject><!-- checkmark -->
					<ttImage>images/popUps/checkMarkSign.png</ttImage>
					<ttEnabled>yes</ttEnabled>
					<ttVisible>no</ttVisible>
					<ttBasePosition x="0" y="0" />
					<ttActionsGroup>
					<ttTrigger>notification</ttTrigger>
					<ttNotificationIdentifyer>$dressUpItemSelectedNotification</ttNotificationIdentifyer>
						<ttSequenceGroup>
							<ttAction ttType="bringToFront"/>
						</ttSequenceGroup>
						<ttSequenceGroup>
							<ttAction>
								<ttType>makeVisible</ttType>
							</ttAction>
							<ttAction>
								<ttType>playSound</ttType>
								<ttFile>sounds/general/treatment_v.mp3</ttFile>
							</ttAction>
						</ttSequenceGroup>
					</ttActionsGroup>
				</ttObject>
			</ttObjects>
            <ttActionsGroup>
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return ( categoryLoaded == $categoryNo and layerIsHidden == 0)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>hideItemsSlider</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return ( categoryLoaded == $categoryNo and layerIsHidden == 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>showItemsSlider</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return ( categoryLoaded ~= $categoryNo )</ttScript>
                </ttOperator>
                <ttMacroInvoke macro_name="dressUpUnLoadAndLoadNewCategory">
                    <ttMacroParam name="$layer" value="$layerName"/>
                    <ttMacroParam name="$yPos" value="0"/>
                </ttMacroInvoke>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>$dressUpCategoryChangedNotification</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>$dressUpCategoryReplaceNotification</ttNotificationIdentifyer>
                <ttOperator>
                    <ttScript>return ( categoryLoaded == $categoryNo )</ttScript>
                </ttOperator>
                <ttMacroInvoke macro_name="dressUpUnLoadAndLoadNewCategory">
                    <ttMacroParam name="$layer" value="$layerName"/>
                    <ttMacroParam name="$yPos" value="0"/>
                </ttMacroInvoke>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>$dressUpCategoryChangedNotification</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return (menuIsOpened == 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>auto press on menu button</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
        </ttObject>
    </ttMacroBody>
</ttMacro>
<ttMacro name="dressUpMenuItem">
    <ttMacroParams>
        <ttMacroParamDef name="$itemId"/>
        <ttMacroParamDef name="$image"/>
        <ttMacroParamDef name="$data"/>
        <ttMacroParamDef name="$categoryName"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttType>menuItem</ttType>
            <ttId>$itemId</ttId>
            <ttImage>$image</ttImage>
            <ttVisible>no</ttVisible>
            <ttActionsGroup>
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendMessageToController</ttType>
                        <ttControllerName>dressUp</ttControllerName>
                        <ttMessage>setItem</ttMessage>
                        <ttMessageParams>$categoryName</ttMessageParams>
                        <ttMessageParams>$data</ttMessageParams>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>countItems</ttVariable>
                        <ttOperator>
                            <ttScript>return (countItems + 1)</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>playDuSound</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
        </ttObject>
    </ttMacroBody>
</ttMacro>


<ttMacro name="dressUpMenuItemLocked">
    <ttMacroParams>
        <ttMacroParamDef name="$itemId"/>
        <ttMacroParamDef name="$image"/>
        <ttMacroParamDef name="$data"/>
        <ttMacroParamDef name="$categoryName"/>
        <ttMacroParamDef name="$itemVarRV"/>
        <ttMacroParamDef name="$itemNo"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttType>menuItem</ttType>
            <ttId>$itemId</ttId>
            <ttImage>$image</ttImage>
            <ttVisible>no</ttVisible>
            <ttObjects>
                <ttObject>
                    <ttImage>images/iconsUI/lock.png</ttImage>
                    <ttBasePosition x="2" y="-1" />
                    <ttZOrder>10</ttZOrder>
                    <ttEnabled>yes</ttEnabled>
                    <ttScale>0.7</ttScale>
                    <ttActionsGroup>
                        <ttTrigger>automatic</ttTrigger>
                        <ttOperator>
                            <ttScript>return (inAppProduct_decorations == 0  and $itemVarRV == 1)</ttScript>
                        </ttOperator>
                        <ttSequenceGroup>
                            <ttAction>
                                <ttType>makeVisible</ttType>
                            </ttAction>
                            <ttAction>
                                <ttType>scaleXy</ttType>
                                <ttActionDuration>0</ttActionDuration>
                                <ttScaleX>0</ttScaleX>
                                <ttScaleY>0</ttScaleY>
                            </ttAction>
                        </ttSequenceGroup>
                    </ttActionsGroup>
                    <ttActionsGroup>
                        <ttTrigger>notification</ttTrigger>
                        <ttNotificationIdentifyer>script: return "$itemVarRV".."Success"</ttNotificationIdentifyer>
                        <ttSequenceGroup>
                            <ttAction>
                                <ttType>scale</ttType>
                                <ttActionDuration>0</ttActionDuration>
                                <ttScaleTo>0</ttScaleTo>
                            </ttAction>
                        </ttSequenceGroup>
                    </ttActionsGroup>
                    <ttActionsGroup>
                        <ttTrigger>automatic</ttTrigger>
                        <ttOperator>
                            <ttScript>return (inAppProduct_decorations == 1)</ttScript>
                        </ttOperator>
                        <ttSequenceGroup>
                            <ttAction>
                                <ttType>scale</ttType>
                                <ttScaleTo>0</ttScaleTo>
                            </ttAction>
                            <ttAction>
                                <ttType>moveToPoint</ttType>
                                <ttFinalPosition x="10" y="150" />
                                <ttActionDuration>0</ttActionDuration>
                            </ttAction>
                        </ttSequenceGroup>
                    </ttActionsGroup>
                    <ttActionsGroup>
                        <ttTrigger>notification</ttTrigger>
                        <ttNotificationIdentifyer>2034</ttNotificationIdentifyer>
                        <ttOperator>
                            <ttScript>return (inAppProduct_decorations == 1)</ttScript>
                        </ttOperator>
                        <ttSequenceGroup>
                            <ttAction>
                                <ttType>makeInvisible</ttType>
                            </ttAction>
                            <ttAction>
                                <ttType>scaleXy</ttType>
                                <ttActionDuration>0</ttActionDuration>
                                <ttScaleX>0</ttScaleX>
                                <ttScaleY>0</ttScaleY>
                            </ttAction>
                        </ttSequenceGroup>
                    </ttActionsGroup>
                </ttObject>
            </ttObjects>
            <ttActionsGroup>
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return (inAppProduct_decorations == 0 and $itemVarRV ~= 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>whichItemWatchesRV</ttVariable>
                        <ttOperator>
                            <ttScript>return $itemNo</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>loadDecorationsStoreLayer</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return (inAppProduct_decorations == 0 and $itemVarRV == 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendMessageToController</ttType>
                        <ttControllerName>dressUp</ttControllerName>
                        <ttMessage>setItem</ttMessage>
                        <ttMessageParams>$categoryName</ttMessageParams>
                        <ttMessageParams>$data</ttMessageParams>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>countItems</ttVariable>
                        <ttOperator>
                            <ttScript>return (countItems + 1)</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>playDuSound</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return (inAppProduct_decorations == 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendMessageToController</ttType>
                        <ttControllerName>dressUp</ttControllerName>
                        <ttMessage>setItem</ttMessage>
                        <ttMessageParams>$categoryName</ttMessageParams>
                        <ttMessageParams>$data</ttMessageParams>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>countItems</ttVariable>
                        <ttOperator>
                            <ttScript>return (countItems + 1)</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>playDuSound</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>rewardedAdShowSuccess</ttNotificationIdentifyer>
                <ttOperator>
                    <ttScript>return (whichItemWatchesRV == $itemNo)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                   <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>$itemVarRV</ttVariable>
                        <ttOperator>
                            <ttScript>return 1</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>unloadDecorationsStoreLayer</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>script: return "$itemVarRV".."Success"</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>successRVParticles</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
        </ttObject>
    </ttMacroBody>
</ttMacro>
<ttMacro name="dressUpItemsSlider">
    <ttMacroParams>
        <ttMacroParamDef name="$name"/>
        <ttMacroParamDef name="$objectsId"/>
        <ttMacroParamDef name="$categoryNo"/>
        <ttMacroParamDef name="$categoryName"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttSoundList></ttSoundList>
            <ttSoundList></ttSoundList>
            <ttSoundList></ttSoundList>
            <ttType>dressUpSliderObject</ttType>
            <ttImage>dressUpSliderObject</ttImage>
            <ttMoveUpOrLeftNotification>moveItemsSliderUp</ttMoveUpOrLeftNotification>
            <ttMoveDownOrRightNotification>moveItemsSliderDown</ttMoveDownOrRightNotification>
            <ttName>$name</ttName>
            <ttCategoryName>$categoryName</ttCategoryName>
            <ttBasePosition x="10.8" y="10.8"/>
            <ttMenuWidth>78.2</ttMenuWidth>
            <ttMenuHeight>10</ttMenuHeight>
            <ttObjectsIdList>$objectsId</ttObjectsIdList>
            <ttIsLooped>no</ttIsLooped>
            <ttMovingSpeed>7</ttMovingSpeed>
            <ttFriction>0</ttFriction>
            <ttNumberOfItemInRow>4.5</ttNumberOfItemInRow>
            <ttNumberOfItemInCol>1</ttNumberOfItemInCol>
            <ttIsHorizontal>YES</ttIsHorizontal>
            <ttMacroInvoke macro_name="dressUpCategoryActions">
            <ttMacroParam name="$categoryNo" value="$categoryNo"/>
            </ttMacroInvoke>
        </ttObject>
    </ttMacroBody>
</ttMacro>
<ttMacro name="dressUpCategoryActions">
    <ttMacroParams>
        <ttMacroParamDef name="$categoryNo"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttActionsGroup>
            <ttApplyOn>layer</ttApplyOn>
            <ttTrigger>automatic</ttTrigger>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>setVariable</ttType>
                    <ttVariable>categoryLoaded</ttVariable>
                    <ttOperator>
                        <ttScript>return $categoryNo</ttScript>
                    </ttOperator>
                </ttAction>
                <ttAction>
                    <ttType>setVariable</ttType>
                    <ttVariable>layerIsHidden</ttVariable>
                    <ttOperator>
                        <ttScript>return 0</ttScript>
                    </ttOperator>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup>
            <ttApplyOn>layer</ttApplyOn>
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>hideItemsSlider</ttNotificationIdentifyer>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>setVariable</ttType>
                    <ttVariable>layerIsHidden</ttVariable>
                    <ttOperator>
                        <ttScript>return 1</ttScript>
                    </ttOperator>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup>
            <ttApplyOn>layer</ttApplyOn>
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>showItemsSlider</ttNotificationIdentifyer>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>setVariable</ttType>
                    <ttVariable>layerIsHidden</ttVariable>
                    <ttOperator>
                        <ttScript>return 0</ttScript>
                    </ttOperator>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>

<ttMacro name="registerDUObjects">
    <ttMacroParams>
        <ttMacroParamDef name="$param"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttActionsGroup>
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>registerDressUpObjects</ttNotificationIdentifyer>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>enableObject</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>sendMessageToController</ttType>
                    <ttControllerName>dressUp</ttControllerName>
                    <ttMessage>registerObject</ttMessage>
                    <ttMessageParams>$param</ttMessageParams>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>
<ttMacro name="checkMarkForTools">
        <ttMacroParams>
            <ttMacroParamDef name="$delay"/>
            <ttMacroParamDef name="$notification"/>
            <ttMacroParamDef name="$posX"/>
            <ttMacroParamDef name="$posY"/>
        </ttMacroParams>
        <ttMacroBody>
            <ttObject><!-- checkmark -->
                <ttImage>images/popUps/checkMarkSign.png</ttImage>
                <ttEnabled>yes</ttEnabled>
                <ttVisible>no</ttVisible>
                <ttBasePosition x="$posX" y="$posY" />
                <ttActionsGroup>
				<ttTrigger>notification</ttTrigger>
				<ttNotificationIdentifyer>$notification</ttNotificationIdentifyer>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>delay</ttType>
                            <ttActionDuration>$delay</ttActionDuration>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>makeVisible</ttType>
                        </ttAction>
                        <ttAction>
                            <ttType>playSound</ttType>
                            <ttFile>sounds/general/treatment_v.mp3</ttFile>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
            </ttObject>
        </ttMacroBody>
    </ttMacro>
<ttMacro name="pupil">
    <ttMacroParams>
        <ttMacroParamDef name="$pupilImage"/>
        <ttMacroParamDef name="$posx"/>
        <ttMacroParamDef name="$posy"/>
        <ttMacroParamDef name="$scale"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttId>pupilID</ttId>
            <ttImage>$pupilImage</ttImage>
            <ttBasePosition x="$posx" y="$posy" />
            <ttScale>$scale</ttScale>
            <ttActionsGroup>
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>touchBeganNotification</ttNotificationIdentifyer> 
                <ttOperator>
                    <ttScript>return ((pupilIsMoving == nil) or (pupilIsMoving == 0))</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>                          
                        <ttType>moveToTouch</ttType>
                        <ttRadius>0.8</ttRadius>
                        <ttEffectiveRadius>10</ttEffectiveRadius>
                    </ttAction>                     
                </ttSequenceGroup>                  
            </ttActionsGroup>               
            <ttActionsGroup>                    
                <ttTrigger>notification</ttTrigger>                 
                <ttNotificationIdentifyer>touchMovedNotification</ttNotificationIdentifyer>                 
                <ttOperator>
                    <ttScript>return ((pupilIsMoving == nil) or (pupilIsMoving == 0))</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveToTouch</ttType>
                        <ttRadius>0.8</ttRadius>
                        <ttEffectiveRadius>10</ttEffectiveRadius>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>touchEndedNotification</ttNotificationIdentifyer>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>pupilIsMoving</ttVariable>
                        <ttOperator>
                            <ttScript>return 1</ttScript>
                        </ttOperator>
                    </ttAction>
                    <ttAction>
                        <ttType>moveToPoint</ttType>
                        <ttFinalPosition x="$posx" y="$posy" />
                        <ttActionDuration>0.2</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>pupilIsMoving</ttVariable>
                        <ttOperator>
                            <ttScript>return 0</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>startHeadAnimation</ttNotificationIdentifyer>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>delay</ttType>
                        <ttActionDuration>0.1</ttActionDuration>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>scale</ttType>
                        <ttScaleTo>0</ttScaleTo>
                        <ttActionDuration>0</ttActionDuration>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
        </ttObject>
    </ttMacroBody>      
</ttMacro>

<ttMacro name="backToMap">
    <ttMacroParams>
        <ttMacroParamDef name="$posXVar"/>
        <ttMacroParamDef name="$posYVar"/>
        <ttMacroParamDef name="$flurryName"/>
        <ttMacroParamDef name="$flurryParam"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttLayer ttName="backToMapPopup">
            <ttLoadAtInit>NO</ttLoadAtInit>
            <ttObject>
                <ttImage>images/fullBlocker.png</ttImage>
                <ttBasePosition x="0" y="0" />
                <ttOpacity>0</ttOpacity>
                <ttActionsGroup> <!-- onTouchesBegan -->
                    <ttTrigger>onTouchesBegan</ttTrigger>
                    <ttSequenceGroup />
                </ttActionsGroup>
                <ttActionsGroup>
                    <ttTrigger>automatic</ttTrigger>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.0</ttActionDuration>
                            <ttScaleTo>1024</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>fadeTo</ttType>
                            <ttOpacity>130</ttOpacity>
                            <ttActionDuration>0.5</ttActionDuration>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
                <ttActionsGroup>
                    <ttTrigger>notification</ttTrigger>
                    <ttNotificationIdentifyer>mapPopUp.close</ttNotificationIdentifyer>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>fadeTo</ttType>
                            <ttOpacity>0</ttOpacity>
                            <ttActionDuration>0</ttActionDuration>
                        </ttAction>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.0</ttActionDuration>
                            <ttScaleTo>0</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>             
                </ttActionsGroup>
            </ttObject>
            <ttObject>
                <ttImage>images/popUps/navigationPopUps/mapPopup_back.png</ttImage>
                <ttBasePosition x="49.8264" y="68.2813" />
				<ttScale>1.199</ttScale>
                <ttActionsGroup>
                    <ttTrigger>automatic</ttTrigger>
                    <ttApplyOn>layer</ttApplyOn>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>playSound</ttType>
                            <ttFile>sounds/pop_up_open.mp3</ttFile>
                            <ttVolume>1</ttVolume>
                        </ttAction>
                        <ttAction>
                            <ttType>scaleXy</ttType>
                            <ttActionDuration>0.5</ttActionDuration>
                            <ttScaleX>1</ttScaleX>
                            <ttScaleY>1</ttScaleY>
                            <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                        </ttAction>
                    </ttSequenceGroup>               
                </ttActionsGroup>
                <ttActionsGroup>
                    <ttTrigger>notification</ttTrigger>
                    <ttNotificationIdentifyer>mapPopUp.close</ttNotificationIdentifyer>
                    <ttApplyOn>layer</ttApplyOn>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>playSound</ttType>
                            <ttFile>sounds/pop_up_close.mp3</ttFile>
                            <ttVolume>1</ttVolume>
                        </ttAction>
                        <ttAction>
                            <ttType>scaleXy</ttType>
                            <ttActionDuration>0.5</ttActionDuration>
                            <ttScaleX>0</ttScaleX>
                            <ttScaleY>0</ttScaleY>
                            <ttActionEaseMode>easeBackIn</ttActionEaseMode>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                        </ttAction>
                    </ttSequenceGroup> 
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>unLoadLayer</ttType>
                            <ttData>backToMapPopup</ttData>
                        </ttAction>
                    </ttSequenceGroup>             
                </ttActionsGroup>
            </ttObject>
            <ttObject>
                <ttImage>images/popUps/navigationPopUps/txt_quit.png</ttImage>
                <ttBasePosition x="49.4792" y="74.0104" />
            </ttObject>
            <ttObject>
                <ttImage>images/iconsUI/closeBtn_popUps.png</ttImage>
                <ttBasePosition x="83.1597" y="83.2552" />
                <ttActionsGroup>
                    <ttTrigger>onTouchesBegan</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>logEvent</ttType>
							<ttLogEventName>$flurryName</ttLogEventName>
							<ttLogEventParam>$flurryParam</ttLogEventParam>
							<ttLogEventVal>Home_PopUp_Close</ttLogEventVal>
						</ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>playSound</ttType>
                            <ttFile>sounds/button_press.mp3</ttFile>
                        </ttAction>
					</ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>sendNotification</ttType>
                            <ttNotificationIdentifyer>mapPopUp.close</ttNotificationIdentifyer>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
            </ttObject>
            <ttObject>
                <ttImage>images/popUps/navigationPopUps/btn_yes.png</ttImage>
                <ttBasePosition x="36.2847" y="60.3385" />
                <ttActionsGroup>
                    <ttTrigger>onTouchesBegan</ttTrigger> 
					<ttSequenceGroup>
						<ttAction>
							<ttType>logEvent</ttType>
							<ttLogEventName>$flurryName</ttLogEventName>
							<ttLogEventParam>$flurryParam</ttLogEventParam>
							<ttLogEventVal>Home_PopUp_Yes</ttLogEventVal>
						</ttAction>
					</ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.1</ttActionDuration>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                            <ttActionEaseMode>easeIn</ttActionEaseMode>
                            <ttScaleTo>0.8</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>playSound</ttType>
                            <ttFile>sounds/button_press.mp3</ttFile>
                        </ttAction>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.1</ttActionDuration>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                            <ttActionEaseMode>easeIn</ttActionEaseMode>
                            <ttScaleTo>1</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.1</ttActionDuration>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                            <ttActionEaseMode>easeIn</ttActionEaseMode>
                            <ttScaleTo>0.9</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.1</ttActionDuration>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                            <ttActionEaseMode>easeIn</ttActionEaseMode>
                            <ttScaleTo>1</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>setVariable</ttType>
                            <ttVariable>scaleMap</ttVariable>
                            <ttOperator>
                                <ttScript>return 1</ttScript>
                            </ttOperator>
                            <ttSave>1</ttSave>
                        </ttAction>
                        <ttAction>
                            <ttType>setVariable</ttType>
                            <ttVariable>posX</ttVariable>
                            <ttOperator>
                                <ttScript>return $posXVar</ttScript>
                            </ttOperator>
                        </ttAction>
                        <ttAction>
                            <ttType>setVariable</ttType>
                            <ttVariable>posY</ttVariable>
                            <ttOperator>
                                <ttScript>return $posYVar</ttScript>
                            </ttOperator>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>sendNotification</ttType>
                            <ttNotificationIdentifyer>unloadAllPopups</ttNotificationIdentifyer>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>moveToScene</ttType>
                            <ttSceneId>1000000</ttSceneId>
                            <ttSceneName>mapScene</ttSceneName>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
            </ttObject>
            <ttObject>
                <ttImage>images/popUps/navigationPopUps/btn_no.png</ttImage>
                <ttBasePosition x="64.2361" y="60.3385" />
                <ttActionsGroup>
                    <ttTrigger>onTouchesBegan</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>logEvent</ttType>
							<ttLogEventName>$flurryName</ttLogEventName>
							<ttLogEventParam>$flurryParam</ttLogEventParam>
							<ttLogEventVal>Home_PopUp_No</ttLogEventVal>
						</ttAction>
					</ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>playSound</ttType>
                            <ttFile>sounds/button_press.mp3</ttFile>
                        </ttAction>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.1</ttActionDuration>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                            <ttActionEaseMode>easeIn</ttActionEaseMode>
                            <ttScaleTo>0.8</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.1</ttActionDuration>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                            <ttActionEaseMode>easeIn</ttActionEaseMode>
                            <ttScaleTo>1</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.1</ttActionDuration>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                            <ttActionEaseMode>easeIn</ttActionEaseMode>
                            <ttScaleTo>0.9</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.1</ttActionDuration>
                            <ttActionEaseRate>2.00</ttActionEaseRate>
                            <ttActionEaseMode>easeIn</ttActionEaseMode>
                            <ttScaleTo>1</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>sendNotification</ttType>
                            <ttNotificationIdentifyer>mapPopUp.close</ttNotificationIdentifyer>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
            </ttObject>
        </ttLayer>
    </ttMacroBody>
</ttMacro>

<ttMacro name="storyLayer">
	<ttMacroParams>
        <ttMacroParamDef name="$storyNum"/>
        <ttMacroParamDef name="$storyNarration"/>
        <ttMacroParamDef name="$delayForClose"/>
	</ttMacroParams>
	<ttMacroBody>
		<ttLayer> <!-- storyLayer -->
			<ttName>storyLayer</ttName>
			<ttScale>0</ttScale>
			<ttObject>
				<ttImage>images/fullBlocker.png</ttImage>
				<ttActionsGroup>
					<ttTrigger>automatic</ttTrigger>
					<ttApplyOn>layer</ttApplyOn>
					<ttSequenceGroup>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>1</ttScaleX>
							<ttScaleY>1</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
				<ttActionsGroup>
					<ttTrigger>notification</ttTrigger>
					<ttNotificationIdentifyer>storyNarration.start</ttNotificationIdentifyer>
					<ttSequenceGroup>
						<ttAction>
							<ttType>pauseBackgroundMusic</ttType>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>playSound</ttType>
							<ttFile>$storyNarration</ttFile>
							<ttVolume>1</ttVolume>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>delay</ttType>
							<ttActionDuration>$delayForClose</ttActionDuration>
						</ttAction>						
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>sendNotification</ttType>
							<ttNotificationIdentifyer>story.close</ttNotificationIdentifyer>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
				<ttActionsGroup>
					<ttTrigger>notification</ttTrigger>
					<ttNotificationIdentifyer>story.close</ttNotificationIdentifyer>
					<ttSequenceGroup>
						<ttAction>
							<ttType>stopSound</ttType>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>playSound</ttType>
							<ttFile>sounds/pop_up_close.mp3</ttFile>
							<ttVolume>1</ttVolume>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>0</ttScaleX>
							<ttScaleY>0</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>unLoadLayer</ttType>
							<ttData>storyLayer</ttData>
						</ttAction>
					</ttSequenceGroup> 
				</ttActionsGroup>
			</ttObject>
			<ttObject>
				<ttImage>images/stories/level00.jpg</ttImage>
				<ttImage>images/stories/level01.jpg</ttImage>
				<ttImage>images/stories/level02.jpg</ttImage>
				<ttImage>images/stories/level03.jpg</ttImage>
				<ttImage>images/stories/level04.jpg</ttImage>
				<ttImage>images/stories/level05.jpg</ttImage>
				<ttImage>images/stories/level06.jpg</ttImage>
				<ttImage>images/stories/level07.jpg</ttImage>
				<ttImage>images/stories/level08.jpg</ttImage>
				<ttImage>images/stories/level09.jpg</ttImage>
				<ttImage>images/stories/level10.jpg</ttImage>
				<ttImage>images/stories/level11.jpg</ttImage>
				<ttImage>images/stories/level12.jpg</ttImage>
				<ttImage>images/stories/level13.jpg</ttImage>
				<ttImage>images/stories/level14.jpg</ttImage>
				<ttImage>images/stories/level15.jpg</ttImage>
				<ttImage>images/stories/level16.jpg</ttImage>
				<ttBasePosition x="50" y="50"/>
				<ttActionsGroup>
					<ttTrigger>onTouchesBegan</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>sendNotification</ttType>
							<ttNotificationIdentifyer>story.close</ttNotificationIdentifyer>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
				<ttActionsGroup>
					<ttTrigger>automatic</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>replaceSpriteWithNextImage</ttType>
							<ttIntValue>$storyNum</ttIntValue>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>1.5</ttScaleX>
							<ttScaleY>1.5</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
				<ttActionsGroup>
					<ttTrigger>automatic</ttTrigger>
					<ttApplyOn>layer</ttApplyOn>
					<ttSequenceGroup>
						<ttAction>
							<ttType>playSound</ttType>
							<ttFile>sounds/pop_up_open.mp3</ttFile>
							<ttVolume>1</ttVolume>
						</ttAction>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>1</ttScaleX>
							<ttScaleY>1</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>               
					<ttSequenceGroup>
						<ttAction>
							<ttType>delay</ttType>
							<ttActionDuration>0.2</ttActionDuration>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>sendNotification</ttType>
							<ttNotificationIdentifyer>storyNarration.start</ttNotificationIdentifyer>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>				
			</ttObject>
            <ttObject>
                <ttImage>images/stories/textLevel00.png</ttImage>
                <ttImage>images/stories/textLevel01.png</ttImage>
                <ttImage>images/stories/textLevel02.png</ttImage>
                <ttImage>images/stories/textLevel03.png</ttImage>
                <ttImage>images/stories/textLevel04.png</ttImage>
                <ttImage>images/stories/textLevel05.png</ttImage>
                <ttImage>images/stories/textLevel06.png</ttImage>
                <ttImage>images/stories/textLevel07.png</ttImage>
                <ttImage>images/stories/textLevel08.png</ttImage>
                <ttImage>images/stories/textLevel09.png</ttImage>
                <ttImage>images/stories/textLevel10.png</ttImage>
                <ttImage>images/stories/textLevel11.png</ttImage>
                <ttImage>images/stories/textLevel12.png</ttImage>
                <ttImage>images/stories/textLevel13.png</ttImage>
                <ttImage>images/stories/textLevel14.png</ttImage>
                <ttImage>images/stories/textLevel15.png</ttImage>
                <ttImage>images/stories/textLevel16.png</ttImage>
                <ttScale>0</ttScale>
                <ttBasePosition x="52.0484" y="13.5196" />
				<ttActionsGroup>
					<ttTrigger>automatic</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>replaceSpriteWithNextImage</ttType>
							<ttIntValue>$storyNum</ttIntValue>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>1.5</ttScaleX>
							<ttScaleY>1.5</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
            </ttObject>			
            <ttObject>
                <ttImage>images/stories/ornamentsStories.png</ttImage>
                <ttBasePosition x="6.6108" y="95.2235" />
            </ttObject>
			<ttObject>
				<ttImage>images/iconsUI/closeBtn_popUps.png</ttImage>
				<ttBasePosition x="95" y="96.5" />
				<ttActionsGroup>
					<ttTrigger>onTouchesBegan</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>sendNotification</ttType>
							<ttNotificationIdentifyer>story.close</ttNotificationIdentifyer>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
			</ttObject>
		</ttLayer>
	</ttMacroBody>
</ttMacro>
<ttMacro name="storyLayerHO">
	<ttMacroParams>
        <ttMacroParamDef name="$storyNum"/>
        <ttMacroParamDef name="$storyNarration"/>
        <ttMacroParamDef name="$delayForClose"/>
	</ttMacroParams>
	<ttMacroBody>
		<ttLayer> <!-- storyLayer -->
			<ttName>storyLayer</ttName>
			<ttLoadAtInit>NO</ttLoadAtInit>
			<ttScale>0</ttScale>
			<ttObject>
				<ttImage>images/fullBlocker.png</ttImage>
				<ttActionsGroup>
					<ttTrigger>automatic</ttTrigger>
					<ttApplyOn>layer</ttApplyOn>
					<ttSequenceGroup>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>1</ttScaleX>
							<ttScaleY>1</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
				<ttActionsGroup>
					<ttTrigger>notification</ttTrigger>
					<ttNotificationIdentifyer>storyNarration.start</ttNotificationIdentifyer>
					<ttSequenceGroup>
						<ttAction>
							<ttType>pauseBackgroundMusic</ttType>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>playSound</ttType>
							<ttFile>$storyNarration</ttFile>
							<ttVolume>1</ttVolume>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>delay</ttType>
							<ttActionDuration>$delayForClose</ttActionDuration>
						</ttAction>						
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>sendNotification</ttType>
							<ttNotificationIdentifyer>story.close</ttNotificationIdentifyer>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
				<ttActionsGroup>
					<ttTrigger>notification</ttTrigger>
					<ttNotificationIdentifyer>story.close</ttNotificationIdentifyer>
					<ttSequenceGroup>
						<ttAction>
							<ttType>stopSound</ttType>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>playSound</ttType>
							<ttFile>sounds/pop_up_close.mp3</ttFile>
							<ttVolume>1</ttVolume>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>resumeBackgroundMusic</ttType>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>0</ttScaleX>
							<ttScaleY>0</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>unLoadLayer</ttType>
							<ttData>storyLayer</ttData>
						</ttAction>
					</ttSequenceGroup> 
				</ttActionsGroup>
			</ttObject>
			<ttObject>
				<ttImage>images/stories/level00.jpg</ttImage>
				<ttImage>images/stories/level01.jpg</ttImage>
				<ttImage>images/stories/level02.jpg</ttImage>
				<ttImage>images/stories/level03.jpg</ttImage>
				<ttImage>images/stories/level04.jpg</ttImage>
				<ttImage>images/stories/level05.jpg</ttImage>
				<ttImage>images/stories/level06.jpg</ttImage>
				<ttImage>images/stories/level07.jpg</ttImage>
				<ttImage>images/stories/level08.jpg</ttImage>
				<ttImage>images/stories/level09.jpg</ttImage>
				<ttImage>images/stories/level10.jpg</ttImage>
				<ttImage>images/stories/level11.jpg</ttImage>
				<ttImage>images/stories/level12.jpg</ttImage>
				<ttImage>images/stories/level13.jpg</ttImage>
				<ttImage>images/stories/level14.jpg</ttImage>
				<ttImage>images/stories/level15.jpg</ttImage>
				<ttImage>images/stories/level16.jpg</ttImage>
				<ttBasePosition x="50" y="50"/>
				<ttActionsGroup>
					<ttTrigger>onTouchesBegan</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>sendNotification</ttType>
							<ttNotificationIdentifyer>story.close</ttNotificationIdentifyer>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
				<ttActionsGroup>
					<ttTrigger>automatic</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>replaceSpriteWithNextImage</ttType>
							<ttIntValue>$storyNum</ttIntValue>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>1.5</ttScaleX>
							<ttScaleY>1.5</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
				<ttActionsGroup>
					<ttTrigger>automatic</ttTrigger>
					<ttApplyOn>layer</ttApplyOn>
					<ttSequenceGroup>
						<ttAction>
							<ttType>playSound</ttType>
							<ttFile>sounds/pop_up_open.mp3</ttFile>
							<ttVolume>1</ttVolume>
						</ttAction>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>1</ttScaleX>
							<ttScaleY>1</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>               
					<ttSequenceGroup>
						<ttAction>
							<ttType>delay</ttType>
							<ttActionDuration>0.2</ttActionDuration>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>sendNotification</ttType>
							<ttNotificationIdentifyer>storyNarration.start</ttNotificationIdentifyer>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>				
			</ttObject>
            <ttObject>
                <ttImage>images/stories/textLevel00.png</ttImage>
                <ttImage>images/stories/textLevel01.png</ttImage>
                <ttImage>images/stories/textLevel02.png</ttImage>
                <ttImage>images/stories/textLevel03.png</ttImage>
                <ttImage>images/stories/textLevel04.png</ttImage>
                <ttImage>images/stories/textLevel05.png</ttImage>
                <ttImage>images/stories/textLevel06.png</ttImage>
                <ttImage>images/stories/textLevel07.png</ttImage>
                <ttImage>images/stories/textLevel08.png</ttImage>
                <ttImage>images/stories/textLevel09.png</ttImage>
                <ttImage>images/stories/textLevel10.png</ttImage>
                <ttImage>images/stories/textLevel11.png</ttImage>
                <ttImage>images/stories/textLevel12.png</ttImage>
                <ttImage>images/stories/textLevel13.png</ttImage>
                <ttImage>images/stories/textLevel14.png</ttImage>
                <ttImage>images/stories/textLevel15.png</ttImage>
                <ttImage>images/stories/textLevel16.png</ttImage>
                <ttScale>0</ttScale>
                <ttBasePosition x="52.0484" y="13.5196" />
				<ttActionsGroup>
					<ttTrigger>automatic</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>replaceSpriteWithNextImage</ttType>
							<ttIntValue>$storyNum</ttIntValue>
						</ttAction>
					</ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>scaleXy</ttType>
							<ttActionDuration>0.5</ttActionDuration>
							<ttScaleX>1.5</ttScaleX>
							<ttScaleY>1.5</ttScaleY>
							<ttActionEaseMode>easeBackOut</ttActionEaseMode>
							<ttActionEaseRate>2.00</ttActionEaseRate>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
            </ttObject>			
            <ttObject>
                <ttImage>images/stories/ornamentsStories.png</ttImage>
                <ttBasePosition x="6.6108" y="95.2235" />
            </ttObject>
			<ttObject>
				<ttImage>images/iconsUI/closeBtn_popUps.png</ttImage>
				<ttBasePosition x="95" y="96.5" />
				<ttActionsGroup>
					<ttTrigger>onTouchesBegan</ttTrigger>
					<ttSequenceGroup>
						<ttAction>
							<ttType>sendNotification</ttType>
							<ttNotificationIdentifyer>story.close</ttNotificationIdentifyer>
						</ttAction>
					</ttSequenceGroup>
				</ttActionsGroup>
			</ttObject>
		</ttLayer>
	</ttMacroBody>
</ttMacro>