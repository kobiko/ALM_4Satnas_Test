<?xml version="1.0" ?>

<ttMacro name="fireShine">
    <ttMacroBody>
        <ttActionsGroup> <!-- automatic -->
            <ttTrigger>automatic</ttTrigger>
            <ttAutoActionRunEvery>2.3</ttAutoActionRunEvery>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>fadeTo</ttType>
                    <ttOpacity>170</ttOpacity>
                    <ttActionDuration>0.5</ttActionDuration>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>fadeTo</ttType>
                    <ttOpacity>220</ttOpacity>
                    <ttActionDuration>0.3</ttActionDuration>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>fadeTo</ttType>
                    <ttOpacity>190</ttOpacity>
                    <ttActionDuration>0.3</ttActionDuration>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>fadeTo</ttType>
                    <ttOpacity>255</ttOpacity>
                    <ttActionDuration>0.7</ttActionDuration>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>delay</ttType>
                    <ttActionDuration>0.5</ttActionDuration>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup> <!-- fire.check -->
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>fire.check</ttNotificationIdentifyer>
            <ttOperator>
                <ttScript>return (0 >= fireState)</ttScript>
            </ttOperator>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>fadeTo</ttType>
                    <ttOpacity>0</ttOpacity>
                    <ttActionDuration>0.25</ttActionDuration>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>stopRunningActions</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>scale</ttType>
                    <ttActionDuration>0</ttActionDuration>
                    <ttScaleTo>0</ttScaleTo>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>
<ttMacro name="lightsAnim">
    <ttMacroBody>
        <ttSequenceGroup>
            <ttAction>
                <ttType>makeVisible</ttType>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>delay</ttType>
                <ttActionDuration>0.15</ttActionDuration>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>makeInvisible</ttType>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>delay</ttType>
                <ttActionDuration>0.15</ttActionDuration>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>makeVisible</ttType>
            </ttAction>
        </ttSequenceGroup>
    </ttMacroBody>
</ttMacro>

<ttMacro name="propagateAutomaticEvent">
    <ttMacroParams>
        <ttMacroParamDef name="$controllerName"/>
    </ttMacroParams>    
    <ttMacroBody>
        <ttActionsGroup>
            <ttTrigger>automatic</ttTrigger>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>sendMessageToController</ttType>
                    <ttControllerName>$controllerName</ttControllerName>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>
<ttMacro name="propagateTouchEvents">   
    <ttMacroParams>
        <ttMacroParamDef name="$controllerName"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttActionsGroup>
            <ttTrigger>onTouchesBegan</ttTrigger>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>sendMessageToController</ttType>
                    <ttControllerName>$controllerName</ttControllerName>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup>
            <ttTrigger>onTouchesEnded</ttTrigger>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>sendMessageToController</ttType>
                    <ttControllerName>$controllerName</ttControllerName>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup>
            <ttTrigger>onTouchesMoved</ttTrigger>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>sendMessageToController</ttType>
                    <ttControllerName>$controllerName</ttControllerName>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>
<ttMacro name="animateLockpick">
    <ttMacroParams>
        <ttMacroParamDef name="$moveX01"/>
        <ttMacroParamDef name="$moveY01"/>
        <ttMacroParamDef name="$moveX02"/>
        <ttMacroParamDef name="$moveY02"/>
        <ttMacroParamDef name="$moveX03"/>
        <ttMacroParamDef name="$moveY03"/>
        <ttMacroParamDef name="$notif01"/>
        <ttMacroParamDef name="$notif02"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttSequenceGroup>
            <ttAction>
                <ttType>moveToPoint</ttType>
                <ttFinalPosition x="$moveX01" y="$moveY01" />
                <ttActionDuration>0.2</ttActionDuration>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>moveToPoint</ttType>
                <ttFinalPosition x="$moveX02" y="$moveY02" />
                <ttActionDuration>0.3</ttActionDuration>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
            <ttAction>
                <ttType>rotateTo</ttType>
                <ttActionDuration>0.3</ttActionDuration>
                <ttActionRotateAngle>3.04</ttActionRotateAngle>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>sendNotification</ttType>
                <ttNotificationIdentifyer>$notif01</ttNotificationIdentifyer>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>rotateTo</ttType>
                <ttActionDuration>0.15</ttActionDuration>
                <ttActionRotateAngle>-2.29</ttActionRotateAngle>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>rotateTo</ttType>
                <ttActionDuration>0.15</ttActionDuration>
                <ttActionRotateAngle>0</ttActionRotateAngle>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>rotateTo</ttType>
                <ttActionDuration>0.15</ttActionDuration>
                <ttActionRotateAngle>-2.29</ttActionRotateAngle>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>rotateTo</ttType>
                <ttActionDuration>0.15</ttActionDuration>
                <ttActionRotateAngle>0</ttActionRotateAngle>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>moveToPoint</ttType>
                <ttFinalPosition x="$moveX03" y="$moveY03" />
                <ttActionDuration>0.3</ttActionDuration>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
            <ttAction>
                <ttType>rotateTo</ttType>
                <ttActionDuration>0.3</ttActionDuration>
                <ttActionRotateAngle>-2.29</ttActionRotateAngle>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
            <ttAction>
                <ttType>sendNotification</ttType>
                <ttNotificationIdentifyer>$notif02</ttNotificationIdentifyer>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>delay</ttType>
                <ttActionDuration>0.3</ttActionDuration>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>moveToPoint</ttType>
                <ttFinalPosition x="$moveX02" y="$moveY02" />
                <ttActionDuration>0.3</ttActionDuration>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
            <ttAction>
                <ttType>rotateTo</ttType>
                <ttActionDuration>0.3</ttActionDuration>
                <ttActionRotateAngle>3.04</ttActionRotateAngle>
                <ttActionEaseMode>easeBackOut</ttActionEaseMode>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>moveToPoint</ttType>
                <ttFinalPosition x="$moveX01" y="$moveY01" />
                <ttActionDuration>0.2</ttActionDuration>
            </ttAction>
        </ttSequenceGroup>
    </ttMacroBody>
</ttMacro>
<ttMacro name="InstructionIngredient">
    <ttMacroParams>
        <ttMacroParamDef name="$id"/>
        <ttMacroParamDef name="$posX"/>
        <ttMacroParamDef name="$posY"/>
        <ttMacroParamDef name="$imageVariable"/>
        <ttMacroParamDef name="$instructionIngredientIndex"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttId>$id</ttId>
            <ttImage>images/level04/gateGame/lockpicks/lockpick_01.png</ttImage>
            <ttImage>images/level04/gateGame/lockpicks/lockpick_02.png</ttImage>
            <ttImage>images/level04/gateGame/lockpicks/lockpick_03.png</ttImage>
            <ttImage>images/level04/gateGame/lockpicks/lockpick_04.png</ttImage>
            <ttImage>images/level04/gateGame/lockpicks/lockpick_05.png</ttImage>
            <ttImage>images/level04/gateGame/lockpicks/lockpick_06.png</ttImage>
            <ttImage>images/level04/gateGame/lockpicks/lockpick_07.png</ttImage>
            <ttImage>images/level04/gateGame/lockpicks/lockpick_08.png</ttImage>
            <ttScale>0.619</ttScale>
            <ttRotate>46.27</ttRotate>
            <ttBasePosition x="$posX" y="$posY" />
            <ttActionsGroup>
                <ttTrigger>automatic</ttTrigger>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendMessageToController</ttType>
                        <ttControllerName>mixing</ttControllerName>
                        <ttMessage>activate</ttMessage>
                        <ttMessageParams>$instructionIngredientIndex</ttMessageParams>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup>
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>mixing.ingredientused.specific</ttNotificationIdentifyer>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>fadeTo</ttType>
                        <ttActionDuration>0.50</ttActionDuration>
                        <ttOpacity>125</ttOpacity>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
        </ttObject>
    </ttMacroBody>
</ttMacro>
<ttMacro name="particlesLockPlace">
    <ttMacroParams>
        <ttMacroParamDef name="$posX"/>
        <ttMacroParamDef name="$posY"/>
    </ttMacroParams>    
    <ttMacroBody>
        <ttSequenceGroup>
            <ttAction>
                <ttType>moveToPoint</ttType>
                <ttFinalPosition x="$posX" y="$posY"  />
                <ttActionDuration>0</ttActionDuration>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>delay</ttType>
                <ttActionDuration>0.5</ttActionDuration>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>startParticles</ttType>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>delay</ttType>
                <ttActionDuration>0.7</ttActionDuration>
            </ttAction>
        </ttSequenceGroup>
        <ttSequenceGroup>
            <ttAction>
                <ttType>startParticles</ttType>
            </ttAction>
        </ttSequenceGroup>
    </ttMacroBody>
</ttMacro>
<ttMacro name="MixingIngredient">
    <ttMacroParams>
        <ttMacroParamDef name="$id"/>
        <ttMacroParamDef name="$image"/>
        <ttMacroParamDef name="$posX"/>
        <ttMacroParamDef name="$posY"/>
        <ttMacroParamDef name="$ingredientparam"/>
        <ttMacroParamDef name="$unlockAnimation"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttId>$id</ttId>
            <ttImage>$image</ttImage>
            <ttBasePosition x="$posX" y="$posY" />
            <ttScale>1.059</ttScale>
            <ttAnchorPositionX>0.19</ttAnchorPositionX>
            <ttAnchorPositionY>0.50</ttAnchorPositionY>
            <ttFlipX>YES</ttFlipX>
            <ttCollision>
                <ttCollisionAnchorPoint x="0.9" y="0.5"/>
                <ttCollisionRadius>4</ttCollisionRadius>
            </ttCollision>
            <ttMacroInvoke macro_name="propagateAutomaticEvent" >
                <ttMacroParam name="$controllerName" value="mixing"/>
            </ttMacroInvoke>
            <ttMacroInvoke macro_name="propagateTouchEvents" >
                <ttMacroParam name="$controllerName" value="mixing"/>
            </ttMacroInvoke>
            <ttActionsGroup> <!-- automatic -->
                <ttTrigger>automatic</ttTrigger>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>canIMoveBottle</ttVariable>
                        <ttOperator>
                            <ttScript>return 0</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendMessageToController</ttType>
                        <ttControllerName>mixing</ttControllerName>
                        <ttMessage>activate</ttMessage>
                        <ttMessageParams>$ingredientparam</ttMessageParams>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup> <!-- onTouchesBegan -->
                <ttTrigger>onTouchesBegan</ttTrigger>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>removeFirstPointer</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>canIMoveBottle</ttVariable>
                        <ttOperator>
                            <ttScript>return 1</ttScript>
                        </ttOperator>
                    </ttAction>
                    <ttAction>
                        <ttType>playSound</ttType>
                        <ttFile>sounds/gateLocksGame/pick_up_key.mp3</ttFile>
                        <ttVolume>1</ttVolume>
                    </ttAction>
                    <ttAction>
                        <ttType>bringToFront</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveObjectToLayer</ttType>
                        <ttLayerName>mixingToolLayer</ttLayerName>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveToTouch</ttType>
                    </ttAction>
                    <ttAction>
                        <ttType>scaleXy</ttType>
                        <ttActionDuration>0.2</ttActionDuration>
                        <ttScaleX>1.359</ttScaleX>
                        <ttScaleY>1.359</ttScaleY>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                    </ttAction>
                    <ttAction>
                        <ttType>rotateTo</ttType>
                        <ttActionRotateAngle>-15</ttActionRotateAngle>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>bringFrontToFront</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup> <!-- onTouchesMoved -->
                <ttTrigger>onTouchesMoved</ttTrigger>
                <ttOperator>
                    <ttScript>return (canIMoveBottle == 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveObjectToLayer</ttType>
                        <ttLayerName>mixingToolLayer</ttLayerName>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>bringToFront</ttType>
                    </ttAction>
                    <ttAction>
                        <ttType>scaleXy</ttType>
                        <ttActionDuration>0</ttActionDuration>
                        <ttScaleX>1.359</ttScaleX>
                        <ttScaleY>1.359</ttScaleY>
                    </ttAction>
                    <ttAction>
                        <ttType>moveToTouch</ttType>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup> <!-- onTouchesEnded -->
                <ttTrigger>onTouchesEnded</ttTrigger>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>disableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveToPoint</ttType>
                        <ttFinalPosition x="$posX" y="$posY" />
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                    </ttAction>
                    <ttAction>
                        <ttType>scaleXy</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttScaleX>1.059</ttScaleX>
                        <ttScaleY>1.059</ttScaleY>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                    </ttAction>
                    <ttAction>
                        <ttType>rotateToBase</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>enableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveObjectToLayer</ttType>
                        <ttLayerName>itemsLayer</ttLayerName>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup> <!-- mixing.wrongingredient.specific -->
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>mixing.wrongingredient.specific</ttNotificationIdentifyer>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>disableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveToPoint</ttType>
                        <ttFinalPosition x="$posX" y="$posY" />
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                    </ttAction>
                    <ttAction>
                        <ttType>scaleXy</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttScaleX>1.059</ttScaleX>
                        <ttScaleY>1.059</ttScaleY>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                    </ttAction>
                    <ttAction>
                        <ttType>rotateToBase</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                    </ttAction>
                    <ttAction>
                        <ttType>playSound</ttType>
                        <ttFile>sounds/gateLocksGame/wrong_key.mp3</ttFile>
                        <ttVolume>1</ttVolume>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>enableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveObjectToLayer</ttType>
                        <ttLayerName>itemsLayer</ttLayerName>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>canIMoveBottle</ttVariable>
                        <ttOperator>
                            <ttScript>return 0</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup> <!-- mixing.rightingredient.specific -->
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>mixing.rightingredient.specific</ttNotificationIdentifyer>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>lockStage</ttVariable>
                        <ttOperator>
                            <ttScript>return (lockStage + 1)</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>$unlockAnimation</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup> <!-- $unlockAnimation 1 -->
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>$unlockAnimation</ttNotificationIdentifyer>
                <ttOperator>
                    <ttScript>return (lockStage == 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>disableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttMacroInvoke macro_name="animateLockpick" >
                    <ttMacroParam name="$moveX01" value="20.767"/>
                    <ttMacroParam name="$moveY01" value="24.5712"/>
                    <ttMacroParam name="$moveX02" value="35.6729"/>
                    <ttMacroParam name="$moveY02" value="24.0912"/>
                    <ttMacroParam name="$moveX03" value="36.6859"/>
                    <ttMacroParam name="$moveY03" value="24.0912"/>
                    <ttMacroParam name="$notif01" value="lockpart02.moveFirst"/>
                    <ttMacroParam name="$notif02" value="lockpart02.moveSecond"/>
                </ttMacroInvoke>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveToPoint</ttType>
                        <ttFinalPosition x="$posX" y="$posY" />
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                    </ttAction>
                    <ttAction>
                        <ttType>scaleXy</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttScaleX>1.059</ttScaleX>
                        <ttScaleY>1.059</ttScaleY>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                    </ttAction>
                    <ttAction>
                        <ttType>rotateToBase</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>enableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveObjectToLayer</ttType>
                        <ttLayerName>itemsLayer</ttLayerName>
                    </ttAction>
                </ttSequenceGroup>
				<ttSequenceGroup>
					<ttAction ttType="sendNotification" ttNotificationIdentifyer="narrateLockpick"/>
				</ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>canIMoveBottle</ttVariable>
                        <ttOperator>
                            <ttScript>return 0</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup> <!-- $unlockAnimation 2 -->
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>$unlockAnimation</ttNotificationIdentifyer>
                <ttOperator>
                    <ttScript>return (lockStage == 2)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>disableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttMacroInvoke macro_name="animateLockpick" >
                    <ttMacroParam name="$moveX01" value="20.767"/>
                    <ttMacroParam name="$moveY01" value="24.5712"/>
                    <ttMacroParam name="$moveX02" value="42.9088"/>
                    <ttMacroParam name="$moveY02" value="24.2655"/>
                    <ttMacroParam name="$moveX03" value="43.9218"/>
                    <ttMacroParam name="$moveY03" value="24.6341"/>
                    <ttMacroParam name="$notif01" value="lockpart03.moveFirst"/>
                    <ttMacroParam name="$notif02" value="lockpart03.moveSecond"/>
                </ttMacroInvoke>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveToPoint</ttType>
                        <ttFinalPosition x="$posX" y="$posY" />
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                    </ttAction>
                    <ttAction>
                        <ttType>scaleXy</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttScaleX>1.059</ttScaleX>
                        <ttScaleY>1.059</ttScaleY>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                    </ttAction>
                    <ttAction>
                        <ttType>rotateToBase</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>enableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveObjectToLayer</ttType>
                        <ttLayerName>itemsLayer</ttLayerName>
                    </ttAction>
                </ttSequenceGroup>
				<ttSequenceGroup>
					<ttAction ttType="sendNotification" ttNotificationIdentifyer="narrateLockpick"/>
				</ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>canIMoveBottle</ttVariable>
                        <ttOperator>
                            <ttScript>return 0</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
            <ttActionsGroup> <!-- $unlockAnimation 3 -->
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>$unlockAnimation</ttNotificationIdentifyer>
                <ttOperator>
                    <ttScript>return (lockStage == 3)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>disableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttMacroInvoke macro_name="animateLockpick" >
                    <ttMacroParam name="$moveX01" value="23.6613"/>
                    <ttMacroParam name="$moveY01" value="25.3313"/>
                    <ttMacroParam name="$moveX02" value="48.2633"/>
                    <ttMacroParam name="$moveY02" value="24.2655"/>
                    <ttMacroParam name="$moveX03" value="49.2763"/>
                    <ttMacroParam name="$moveY03" value="24.6341"/>
                    <ttMacroParam name="$notif01" value="lockpart04.moveFirst"/>
                    <ttMacroParam name="$notif02" value="lockpart04.moveSecond"/>
                </ttMacroInvoke>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveToPoint</ttType>
                        <ttFinalPosition x="$posX" y="$posY" />
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                    </ttAction>
                    <ttAction>
                        <ttType>scaleXy</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttScaleX>1.059</ttScaleX>
                        <ttScaleY>1.059</ttScaleY>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                    </ttAction>
                    <ttAction>
                        <ttType>rotateToBase</ttType>
                        <ttActionDuration>0.5</ttActionDuration>
                        <ttActionEaseRate>2.00</ttActionEaseRate>
                        <ttActionEaseMode>easeIn</ttActionEaseMode>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>enableObject</ttType>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>moveObjectToLayer</ttType>
                        <ttLayerName>itemsLayer</ttLayerName>
                    </ttAction>
                </ttSequenceGroup>
				<ttSequenceGroup>
					<ttAction ttType="sendNotification" ttNotificationIdentifyer="narrateLockpick"/>
				</ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>canIMoveBottle</ttVariable>
                        <ttOperator>
                            <ttScript>return 0</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
        </ttObject>
    </ttMacroBody>
</ttMacro>
<ttMacro name="mixingGameFull">
    <ttMacroBody>
        <ttLayer> <!-- mixing Layer -->
            <ttName>MixingLayer</ttName>
            <ttLoadAtInit>NO</ttLoadAtInit>
            <ttScale>0</ttScale>
            <ttObject> <!-- dummy controll -->
                <ttImage>images/fullBlocker.png</ttImage>
                <ttBasePosition x="0" y="0" />
                <ttOpacity>0</ttOpacity>
                <ttActionsGroup> <!-- onTouchesBegan -->
                    <ttTrigger>onTouchesBegan</ttTrigger>
                    <ttSequenceGroup>
                    </ttSequenceGroup>
                </ttActionsGroup>
                <ttActionsGroup> <!-- automatic -->
                    <ttTrigger>automatic</ttTrigger>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>setVariable</ttType>
                            <ttVariable>movePointer</ttVariable>
                            <ttOperator>
                                <ttScript>return 0</ttScript>
                            </ttOperator>
                        </ttAction>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.0</ttActionDuration>
                            <ttScaleTo>2024</ttScaleTo>
                        </ttAction>
                        <ttAction>
                            <ttType>sendNotification</ttType>
                            <ttNotificationIdentifyer>mixingMinigameStarted</ttNotificationIdentifyer>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>fadeTo</ttType>
                            <ttOpacity>200</ttOpacity>
                            <ttActionDuration>0.5</ttActionDuration>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
                <ttActionsGroup> <!-- mixingGame.close -->
                    <ttTrigger>notification</ttTrigger>
                    <ttNotificationIdentifyer>mixingGame.close</ttNotificationIdentifyer>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>fadeTo</ttType>
                            <ttOpacity>0</ttOpacity>
                            <ttActionDuration>0.25</ttActionDuration>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0</ttActionDuration>
                            <ttScaleTo>0</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
                <ttActionsGroup> <!-- automatic layer -->
                    <ttTrigger>automatic</ttTrigger>
                    <ttApplyOn>layer</ttApplyOn>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>setVariable</ttType>
                            <ttVariable>lockStage</ttVariable>
                            <ttOperator>
                                <ttScript>return 0</ttScript>
                            </ttOperator>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>playSound</ttType>
                            <ttFile>sounds/pop_up_open.mp3</ttFile>
                        </ttAction>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.5</ttActionDuration>
                            <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                            <ttScaleTo>1</ttScaleTo>
                        </ttAction>
                        <ttAction>
                            <ttType>sendNotification</ttType>
                            <ttNotificationIdentifyer>lockpickBlack.target.1.activate</ttNotificationIdentifyer>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
                <ttActionsGroup> <!-- mixingGame.close -->
                    <ttTrigger>notification</ttTrigger>
                    <ttNotificationIdentifyer>mixingGame.close</ttNotificationIdentifyer>
                    <ttApplyOn>layer</ttApplyOn>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>playSound</ttType>
                            <ttFile>sounds/pop_up_close.mp3</ttFile>
                        </ttAction>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.5</ttActionDuration>
                            <ttActionEaseMode>easeBackIn</ttActionEaseMode>
                            <ttScaleTo>0</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>unLoadLayer</ttType>
                            <ttData>MixingLayer</ttData>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
                <ttActionsGroup> <!-- mixing.finished -->
                    <ttTrigger>notification</ttTrigger>
                    <ttNotificationIdentifyer>mixing.finished</ttNotificationIdentifyer>
                    <ttApplyOn>layer</ttApplyOn>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>delay</ttType>
                            <ttActionDuration>2</ttActionDuration>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>sendNotification</ttType>
                            <ttNotificationIdentifyer>gate.open</ttNotificationIdentifyer>
                        </ttAction>
                    </ttSequenceGroup>
					<ttSequenceGroup>
						<ttAction>
							<ttType>logEvent</ttType>
							<ttLogEventName>Level_4</ttLogEventName>
							<ttLogEventParam>Tool_Completed</ttLogEventParam>
							<ttLogEventVal>GateUnlock_DragMinigame_6_Final</ttLogEventVal>
						</ttAction>
					</ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>playSound</ttType>
                            <ttFile>sounds/pop_up_close.mp3</ttFile>
                        </ttAction>
                        <ttAction>
                            <ttType>scale</ttType>
                            <ttActionDuration>0.5</ttActionDuration>
                            <ttActionEaseMode>easeBackIn</ttActionEaseMode>
                            <ttScaleTo>0</ttScaleTo>
                        </ttAction>
                    </ttSequenceGroup>
                    <ttSequenceGroup>
                        <ttAction>
                            <ttType>unLoadLayer</ttType>
                            <ttData>MixingLayer</ttData>
                        </ttAction>
                    </ttSequenceGroup>
                </ttActionsGroup>
            </ttObject>
            <ttLayers>
                <ttLayer ttName="itemsLayer">
                    <ttObject> <!-- panel -->
                        <ttId>mixing.ingredientsBackground</ttId>
                        <ttImage>images/level04/gateGame/gateLockPopup_panel.png</ttImage>
                        <ttBasePosition x="50" y="50" />
                        <ttActionsGroup>
                            <ttTrigger>onTouchesBegan</ttTrigger>
                            <ttSequenceGroup>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <!-- intruction -->
                    <ttMacroInvoke macro_name="InstructionIngredient">
                        <ttMacroParam name="$id" value="mixing.instruction.1"/>
                        <ttMacroParam name="$posX" value="30.6078"/>
                        <ttMacroParam name="$posY" value="88.1976"/>
                        <ttMacroParam name="$imageVariable" value="mixingIngredientImage1"/>
                        <ttMacroParam name="$instructionIngredientIndex" value="1"/>
                    </ttMacroInvoke>
                    <ttMacroInvoke macro_name="InstructionIngredient">
                        <ttMacroParam name="$id" value="mixing.instruction.2"/>
                        <ttMacroParam name="$posX" value="47.9739"/>
                        <ttMacroParam name="$posY" value="88.1976"/>
                        <ttMacroParam name="$imageVariable" value="mixingIngredientImage2"/>
                        <ttMacroParam name="$instructionIngredientIndex" value="2"/>
                    </ttMacroInvoke>
                    <ttMacroInvoke macro_name="InstructionIngredient">
                        <ttMacroParam name="$id" value="mixing.instruction.3"/>
                        <ttMacroParam name="$posX" value="66.2084"/>
                        <ttMacroParam name="$posY" value="88.1976"/>
                        <ttMacroParam name="$imageVariable" value="mixingIngredientImage3"/>
                        <ttMacroParam name="$instructionIngredientIndex" value="3"/>
                    </ttMacroInvoke>
                    <!-- lockpicks -->
                    <ttMacroInvoke macro_name="MixingIngredient">
                        <ttMacroParam name="$id" value="mixing.ingredient.blue"/>
                        <ttMacroParam name="$image" value="images/level04/gateGame/lockpicks/lockpick_01.png"/>
                        <ttMacroParam name="$posX" value="14.6889"/>
                        <ttMacroParam name="$posY" value="76.797"/>
                        <ttMacroParam name="$ingredientparam" value="1"/>
                        <ttMacroParam name="$unlockAnimation" value="unlocAnimation01"/>
                    </ttMacroInvoke>
                    <ttMacroInvoke macro_name="MixingIngredient">
                        <ttMacroParam name="$id" value="mixing.ingredient.green"/>
                        <ttMacroParam name="$image" value="images/level04/gateGame/lockpicks/lockpick_02.png"/>
                        <ttMacroParam name="$posX" value="15.123"/>
                        <ttMacroParam name="$posY" value="70.2823"/>
                        <ttMacroParam name="$ingredientparam" value="2"/>
                        <ttMacroParam name="$unlockAnimation" value="unlocAnimation02"/>
                    </ttMacroInvoke>
                    <ttMacroInvoke macro_name="MixingIngredient">
                        <ttMacroParam name="$id" value="mixing.ingredient.red"/>
                        <ttMacroParam name="$image" value="images/level04/gateGame/lockpicks/lockpick_03.png"/>
                        <ttMacroParam name="$posX" value="15.2677"/>
                        <ttMacroParam name="$posY" value="62.6819"/>
                        <ttMacroParam name="$ingredientparam" value="3"/>
                        <ttMacroParam name="$unlockAnimation" value="unlocAnimation03"/>
                    </ttMacroInvoke>
                    <ttMacroInvoke macro_name="MixingIngredient">
                        <ttMacroParam name="$id" value="mixing.ingredient.pinkLight"/>
                        <ttMacroParam name="$image" value="images/level04/gateGame/lockpicks/lockpick_04.png"/>
                        <ttMacroParam name="$posX" value="14.6889"/>
                        <ttMacroParam name="$posY" value="54.43"/>
                        <ttMacroParam name="$ingredientparam" value="4"/>
                        <ttMacroParam name="$unlockAnimation" value="unlocAnimation04"/>
                    </ttMacroInvoke>
                    <ttMacroInvoke macro_name="MixingIngredient">
                        <ttMacroParam name="$id" value="mixing.ingredient.orange"/>
                        <ttMacroParam name="$image" value="images/level04/gateGame/lockpicks/lockpick_05.png"/>
                        <ttMacroParam name="$posX" value="57.6701"/>
                        <ttMacroParam name="$posY" value="75.9284"/>
                        <ttMacroParam name="$ingredientparam" value="5"/>
                        <ttMacroParam name="$unlockAnimation" value="unlocAnimation05"/>
                    </ttMacroInvoke>
                    <ttMacroInvoke macro_name="MixingIngredient">
                        <ttMacroParam name="$id" value="mixing.ingredient.pink"/>
                        <ttMacroParam name="$image" value="images/level04/gateGame/lockpicks/lockpick_06.png"/>
                        <ttMacroParam name="$posX" value="58.2489"/>
                        <ttMacroParam name="$posY" value="69.088"/>
                        <ttMacroParam name="$ingredientparam" value="6"/>
                        <ttMacroParam name="$unlockAnimation" value="unlocAnimation06"/>
                    </ttMacroInvoke>
                    <ttMacroInvoke macro_name="MixingIngredient">
                        <ttMacroParam name="$id" value="mixing.ingredient.purple"/>
                        <ttMacroParam name="$image" value="images/level04/gateGame/lockpicks/lockpick_07.png"/>
                        <ttMacroParam name="$posX" value="58.1042"/>
                        <ttMacroParam name="$posY" value="62.139"/>
                        <ttMacroParam name="$ingredientparam" value="7"/>
                        <ttMacroParam name="$unlockAnimation" value="unlocAnimation07"/>
                    </ttMacroInvoke>
                    <ttMacroInvoke macro_name="MixingIngredient">
                        <ttMacroParam name="$id" value="mixing.ingredient.yellow"/>
                        <ttMacroParam name="$image" value="images/level04/gateGame/lockpicks/lockpick_08.png"/>
                        <ttMacroParam name="$posX" value="57.3083"/>
                        <ttMacroParam name="$posY" value="54.8317"/>
                        <ttMacroParam name="$ingredientparam" value="8"/>
                        <ttMacroParam name="$unlockAnimation" value="unlocAnimation08"/>
                    </ttMacroInvoke>
                    <ttObject> <!-- lock -->
                        <ttId>mixing.container</ttId>
                        <ttImage>images/level04/gateGame/the_lock.png</ttImage>
                        <ttBasePosition x="71.563" y="24.6797" />
                        <ttScale>1.453</ttScale>
                        <ttRotate>0</ttRotate>
                        <ttCollision>
                            <ttCollisionAnchorPoint x="0.4" y="0.5"/>
                            <ttCollisionRadius>6</ttCollisionRadius>
                        </ttCollision>
                        <ttActionsGroup>
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.1</ttNotificationIdentifyer>
							<ttSequenceGroup>
								<ttAction>
									<ttType>logEvent</ttType>
									<ttLogEventName>Level_4</ttLogEventName>
									<ttLogEventParam>Tool_Completed</ttLogEventParam>
									<ttLogEventVal>GateUnlock_DragMinigame_2</ttLogEventVal>
								</ttAction>
							</ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup>
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.2</ttNotificationIdentifyer>
			                <ttSequenceGroup>
								<ttAction>
									<ttType>logEvent</ttType>
									<ttLogEventName>Level_4</ttLogEventName>
									<ttLogEventParam>Tool_Completed</ttLogEventParam>
									<ttLogEventVal>GateUnlock_DragMinigame_3</ttLogEventVal>
								</ttAction>
							</ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup>
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.3</ttNotificationIdentifyer>
			                <ttSequenceGroup>
								<ttAction>
									<ttType>logEvent</ttType>
									<ttLogEventName>Level_4</ttLogEventName>
									<ttLogEventParam>Tool_Completed</ttLogEventParam>
									<ttLogEventVal>GateUnlock_DragMinigame_4</ttLogEventVal>
								</ttAction>
							</ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup>
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.finished</ttNotificationIdentifyer>
			                <ttSequenceGroup>
								<ttAction>
									<ttType>logEvent</ttType>
									<ttLogEventName>Level_4</ttLogEventName>
									<ttLogEventParam>Tool_Completed</ttLogEventParam>
									<ttLogEventVal>GateUnlock_DragMinigame_5</ttLogEventVal>
								</ttAction>
							</ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- lockpart 01 -->
                        <ttId>lockpickBlack.target.1</ttId>
                        <ttImage>images/level04/gateGame/lockPart_01.png</ttImage>
                        <ttImage>images/level04/gateGame/lockPart_02.png</ttImage>
                        <ttImage>images/level04/gateGame/lockPart_03.png</ttImage>
                        <ttBasePosition x="59.1172" y="27.5027" />
                        <ttCollision>
                            <ttCollisionAnchorPoint x="0.5" y="0.2"/>
                            <ttCollisionRadius>4</ttCollisionRadius>
                        </ttCollision>
                        <ttActionsGroup> <!-- lockpick.target.1.activate -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpickBlack.target.1.activate</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendMessageToController</ttType>
                                    <ttControllerName>lockpickBlack</ttControllerName>
                                    <ttMessage>activate</ttMessage>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>0</ttIntValue>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart01.moveFirst -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart01.moveFirst</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>1</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/key_unlock.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart01.moveFirst -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart01.moveSecond</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>2</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/key_unlock.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- lockpart 02 -->
                        <ttImage>images/level04/gateGame/lockPart_01.png</ttImage>
                        <ttImage>images/level04/gateGame/lockPart_02.png</ttImage>
                        <ttImage>images/level04/gateGame/lockPart_03.png</ttImage>
                        <ttBasePosition x="66.3531" y="27.5027" />
                        <ttActionsGroup> <!-- automatic -->
                            <ttTrigger>automatic</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>0</ttIntValue>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart02.moveFirst -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart02.moveFirst</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>1</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/key_unlock.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart02.moveFirst -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart02.moveSecond</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>2</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/key_unlock.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- lockpart 03 -->
                        <ttImage>images/level04/gateGame/lockPart_01.png</ttImage>
                        <ttImage>images/level04/gateGame/lockPart_02.png</ttImage>
                        <ttImage>images/level04/gateGame/lockPart_03.png</ttImage>
                        <ttBasePosition x="73.7337" y="27.5027" />
                        <ttActionsGroup> <!-- automatic -->
                            <ttTrigger>automatic</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>0</ttIntValue>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart03.moveFirst -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart03.moveFirst</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>1</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/key_unlock.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart03.moveFirst -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart03.moveSecond</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>2</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/key_unlock.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- lockpart 04 -->
                        <ttImage>images/level04/gateGame/lockPart_01.png</ttImage>
                        <ttImage>images/level04/gateGame/lockPart_02.png</ttImage>
                        <ttImage>images/level04/gateGame/lockPart_03.png</ttImage>
                        <ttBasePosition x="81.6932" y="27.5027" />
                        <ttActionsGroup> <!-- automatic -->
                            <ttTrigger>automatic</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>0</ttIntValue>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart04.moveFirst -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart04.moveFirst</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>1</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/key_unlock.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart04.moveFirst -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart04.moveSecond</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>2</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/key_unlock.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- lock dust -->
                        <ttImage>images/fullBlocker.png</ttImage>
                        <ttType>particles</ttType>
                        <ttBasePosition x="156.2489" y="135.0402" />
                        <ttParticles>
                            <ttParticlesPlist>images/particles/lockDust.plist</ttParticlesPlist>
                        </ttParticles>
                        <ttActionsGroup> <!-- lockpickBlack.enter -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpickBlack.enter</ttNotificationIdentifyer>
                            <ttMacroInvoke macro_name="particlesLockPlace" >
                                <ttMacroParam name="$posX" value="58.8277"/>
                                <ttMacroParam name="$posY" value="31.8459"/>
                            </ttMacroInvoke>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.stagestart.1 -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.1</ttNotificationIdentifyer>
                            <ttMacroInvoke macro_name="particlesLockPlace" >
                                <ttMacroParam name="$posX" value="66.2084"/>
                                <ttMacroParam name="$posY" value="31.8459"/>
                            </ttMacroInvoke>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.stagestart.2 -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.2</ttNotificationIdentifyer>
                            <ttMacroInvoke macro_name="particlesLockPlace" >
                                <ttMacroParam name="$posX" value="73.8784"/>
                                <ttMacroParam name="$posY" value="31.8459"/>
                            </ttMacroInvoke>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.stagestart.3 -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.3</ttNotificationIdentifyer>
                            <ttMacroInvoke macro_name="particlesLockPlace" >
                                <ttMacroParam name="$posX" value="81.5484"/>
                                <ttMacroParam name="$posY" value="31.8459"/>
                            </ttMacroInvoke>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- blocker -->
                        <ttImage>images/fullBlocker.png</ttImage>
                        <ttBasePosition x="0" y="0" />
                        <ttOpacity>0</ttOpacity>
                        <ttScale>1000</ttScale>
                        <ttActionsGroup> <!-- onTouchesBegan -->
                            <ttTrigger>onTouchesBegan</ttTrigger>
                            <ttSequenceGroup />
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart01.done -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart01.done</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- start lockpick -->
                        <ttId>lockpickBlack.tool</ttId>
                        <ttImage>images/level04/gateGame/lockpicks/lockpick_00.png</ttImage>
                        <ttAnchorPositionX>0.13</ttAnchorPositionX>
                        <ttAnchorPositionY>0.59</ttAnchorPositionY>
                        <ttScale>1.027</ttScale>
                        <ttBasePosition x="12.5904" y="8.03475" />
                        <ttCollision>
                            <ttCollisionAnchorPoint x="0.9" y="0.5"/>
                            <ttCollisionRadius>2</ttCollisionRadius>
                        </ttCollision>
                        <ttActionsGroup> <!-- automatic -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>blockForCloseMixing</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>enableObject</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- automatic -->
                            <ttTrigger>automatic</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>enableObject</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- onTouchesBegan -->
                            <ttTrigger>onTouchesBegan</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>setVariable</ttType>
                                    <ttVariable>youCanTouchBlackLockpick</ttVariable>
                                    <ttOperator>
                                        <ttScript>return 1</ttScript>
                                    </ttOperator>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/toolsSFX/pick_up_tool.mp3</ttFile>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>lockpickBlack.hidePointer</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToTouch</ttType>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveObjectToLayer</ttType>
                                    <ttLayerName>mixingToolLayer</ttLayerName>
                                </ttAction>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendMessageToController</ttType>
                                    <ttControllerName>lockpickBlack</ttControllerName>
                                    <ttMessage>touchesBegan</ttMessage>
                                </ttAction>
                            </ttSequenceGroup> 
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- onTouchesMoved -->
                            <ttTrigger>onTouchesMoved</ttTrigger>
                            <ttOperator>
                                <ttScript>return (youCanTouchBlackLockpick == 1)</ttScript> 
                            </ttOperator>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0</ttActionDuration>
                                    <ttScaleTo>1.027</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveObjectToLayer</ttType>
                                    <ttLayerName>mixingToolLayer</ttLayerName>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToTouch</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendMessageToController</ttType>
                                    <ttControllerName>lockpickBlack</ttControllerName>
                                    <ttMessage>touchesMoved</ttMessage>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- onTouchesEnded -->
                            <ttTrigger>onTouchesEnded</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendMessageToController</ttType>
                                    <ttControllerName>lockpickBlack</ttControllerName>
                                    <ttMessage>touchesEnded</ttMessage>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/toolsSFX/tool_fly_back.mp3</ttFile>
                                    <ttVolume>0.6</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttMacroInvoke macro_name="toolsEndedAnimation">
                                <ttMacroParam name="$finalX" value="12.5904"/>
                                <ttMacroParam name="$finalY" value="8.03475"/>
                                <ttMacroParam name="$scaleX" value="1.027"/>
                                <ttMacroParam name="$scaleY" value="1.027"/>
                            </ttMacroInvoke>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveObjectToLayer</ttType>
                                    <ttLayerName>itemsLayer</ttLayerName>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpickBlack.enter -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpickBlack.enter</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>setVariable</ttType>
                                    <ttVariable>youCanTouchBlackLockpick</ttVariable>
                                    <ttOperator>
                                        <ttScript>return 0</ttScript>
                                    </ttOperator>
                                </ttAction>
                                <ttAction>
                                    <ttType>disableObject</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="25.4703" y="24.8643" />
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="35.3111" y="25.4072" />
                                    <ttActionDuration>0.3</ttActionDuration>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0.3</ttActionDuration>
                                    <ttActionRotateAngle>3.04</ttActionRotateAngle>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>lockpart01.moveFirst</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0.15</ttActionDuration>
                                    <ttActionRotateAngle>-2.29</ttActionRotateAngle>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0.15</ttActionDuration>
                                    <ttActionRotateAngle>0</ttActionRotateAngle>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0.15</ttActionDuration>
                                    <ttActionRotateAngle>-2.29</ttActionRotateAngle>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0.15</ttActionDuration>
                                    <ttActionRotateAngle>0</ttActionRotateAngle>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="35.6005" y="26.0587" />
                                    <ttActionDuration>0.3</ttActionDuration>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0.3</ttActionDuration>
                                    <ttActionRotateAngle>-2.29</ttActionRotateAngle>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>lockpart01.moveSecond</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>lockpart01.done</ttNotificationIdentifyer>
                                </ttAction>
                                <ttAction>
                                    <ttType>setVariable</ttType>
                                    <ttVariable>markBlackLock</ttVariable>
                                    <ttOperator>
                                        <ttScript>return 1</ttScript>
                                    </ttOperator>
                                </ttAction>
                                <ttAction>
                                    <ttType>disableObject</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.stagestart.3 -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.3</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>enableObject</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>2.5</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="35.3111" y="25.4072" />
                                    <ttActionDuration>0.3</ttActionDuration>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0.3</ttActionDuration>
                                    <ttActionRotateAngle>3.04</ttActionRotateAngle>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="25.4703" y="24.8643" />
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>finalizer.enable</ttNotificationIdentifyer>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="12.5904" y="8.03475" />
                                    <ttActionEaseMode>easeIn</ttActionEaseMode>  
                                    <ttActionEaseRate>2.00</ttActionEaseRate>
                                    <ttActionDuration>0.5</ttActionDuration>
                                </ttAction>
                                <ttAction>
                                    <ttType>scaleXy</ttType>
                                    <ttActionDuration>0.5</ttActionDuration>
                                    <ttScaleX>1.027</ttScaleX>
                                    <ttScaleY>1.027</ttScaleY>
                                    <ttActionEaseMode>easeIn</ttActionEaseMode>  
                                    <ttActionEaseRate>2.00</ttActionEaseRate>
                                </ttAction>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/toolsSFX/tool_fly_back.mp3</ttFile>
                                    <ttVolume>0.6</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- finalizer claw -->
                        <ttId>mixing.finalizer</ttId>
                        <ttImage>images/level04/gateGame/the_claw_01.png</ttImage>
                        <ttImage>images/level04/gateGame/the_claw_02.png</ttImage>
                        <ttAnchorPositionX>0.15</ttAnchorPositionX>
                        <ttAnchorPositionY>0.49</ttAnchorPositionY>
                        <ttScale>1.188</ttScale>
                        <ttBasePosition x="9.69613" y="38.8708" />
                        <ttVisible>yes</ttVisible>
                        <ttEnabled>no</ttEnabled>
                        <ttCollision>
                            <ttCollisionAnchorPoint x="1" y="0.5"/>
                            <ttCollisionRadius>6</ttCollisionRadius>
                        </ttCollision>
                        <ttMacroInvoke macro_name="propagateAutomaticEvent" >
                            <ttMacroParam name="$controllerName" value="mixing"/>
                        </ttMacroInvoke>
                        <ttMacroInvoke macro_name="propagateTouchEvents" >
                            <ttMacroParam name="$controllerName" value="mixing"/>
                        </ttMacroInvoke>
                        <ttActionsGroup> <!-- automatic -->
                            <ttTrigger>automatic</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>disableObject</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- finalizer.enable -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>finalizer.enable</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>enableObject</ttType>
                                </ttAction>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>showLadlePointer</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.rightingredient.specific -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.rightingredient.specific</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>disableObject</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveObjectToLayer</ttType>
                                    <ttLayerName>mixingToolLayer</ttLayerName>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="20.6947" y="24.8643" />
                                    <ttActionDuration>0.3</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>hidePointer</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>1</ttIntValue>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>startHandleParticles</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/handle_unlocked.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>0</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>hidePointer</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>1</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/handle_unlocked.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>0</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>hidePointer</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>1</ttIntValue>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/handle_unlocked.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>0</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>replaceSpriteWithNextImage</ttType>
                                    <ttIntValue>1</ttIntValue>
                                </ttAction>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/gateLocksGame/handle_open.mp3</ttFile>
                                    <ttVolume>1</ttVolume>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- onTouchesBegan -->
                            <ttTrigger>onTouchesBegan</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/toolsSFX/pick_up_tool.mp3</ttFile>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveObjectToLayer</ttType>
                                    <ttLayerName>mixingToolLayer</ttLayerName>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>bringToFront</ttType>
                                </ttAction>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>hidePointer</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- onTouchesMoved -->
                            <ttTrigger>onTouchesMoved</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveObjectToLayer</ttType>
                                    <ttLayerName>mixingToolLayer</ttLayerName>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>hidePointer</ttNotificationIdentifyer>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToTouch</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- onTouchesEnded -->
                            <ttTrigger>onTouchesEnded</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>disableObject</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/toolsSFX/tool_fly_back.mp3</ttFile>
                                    <ttVolume>0.6</ttVolume>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="9.69613" y="38.8708"/>
                                    <ttActionDuration>0.5</ttActionDuration>
                                    <ttActionEaseRate>2.00</ttActionEaseRate>
                                    <ttActionEaseMode>easeBackOut</ttActionEaseMode>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>enableObject</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- handle dust -->
                        <ttImage>images/fullBlocker.png</ttImage>
                        <ttType>particles</ttType>
                        <ttBasePosition x="156.2489" y="135.0402" />
                        <ttParticles>
                            <ttParticlesPlist>images/particles/lockDust.plist</ttParticlesPlist>
                        </ttParticles>
                        <ttActionsGroup> <!-- startHandleParticles -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>startHandleParticles</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="51.5919" y="25.2227"  />
                                    <ttActionDuration>0</ttActionDuration>
                                </ttAction>
                                <ttAction>
                                    <ttType>scaleXy</ttType>
                                    <ttActionDuration>0</ttActionDuration>
                                    <ttScaleX>3</ttScaleX>
                                    <ttScaleY>3</ttScaleY>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>startParticles</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>startParticles</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>startParticles</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>startParticles</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>startParticles</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>startParticles</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- close button -->
                        <ttImage>images/level01/mazeMinigame01/maze_closeBtn.png</ttImage>
                        <ttBasePosition x="93.8495" y="95.9066" />
                        <ttActionsGroup> <!-- onTouchesBegan -->
                            <ttTrigger>onTouchesBegan</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>lockpick.target.1.activate</ttNotificationIdentifyer>
                                </ttAction>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>blockForCloseMixing</ttNotificationIdentifyer>
                                </ttAction>
                            </ttSequenceGroup>
							<ttSequenceGroup>
								<ttAction>
									<ttType>logEvent</ttType>
									<ttLogEventName>GeneralButton_Click</ttLogEventName>
									<ttLogEventParam>Close</ttLogEventParam>
									<ttLogEventVal>Level4_Gate</ttLogEventVal>
								</ttAction>
							</ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>playSound</ttType>
                                    <ttFile>sounds/button_press.mp3</ttFile>
                                </ttAction>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.10</ttActionDuration>
                                    <ttActionEaseRate>2.00</ttActionEaseRate>
                                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                                    <ttScaleTo>0.85</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.10</ttActionDuration>
                                    <ttActionEaseRate>2.00</ttActionEaseRate>
                                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                                    <ttScaleTo>1.05</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.10</ttActionDuration>
                                    <ttActionEaseRate>2.00</ttActionEaseRate>
                                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                                    <ttScaleTo>0.95</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.10</ttActionDuration>
                                    <ttActionEaseRate>2.00</ttActionEaseRate>
                                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                                    <ttScaleTo>1.00</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>sendNotification</ttType>
                                    <ttNotificationIdentifyer>mixingGame.close</ttNotificationIdentifyer>
                                </ttAction> 
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                </ttLayer>
                <ttLayer ttName="mixingToolLayer" />
                <ttLayer ttName="handleLayer">
					<ttObject> <!-- handle -->
                        <ttImage>images/level04/gateGame/the_handle.png</ttImage>
                        <ttBasePosition x="50.2894" y="24.6797" />
                    </ttObject>
					<ttObject> <!-- lockBottom -->
                        <ttImage>images/level04/gateGame/lockBottom.png</ttImage>
                        <ttScale>1.27</ttScale>
                        <ttBasePosition x="71" y="19.2458" />
                    </ttObject>
					
				</ttLayer>
                <ttLayer ttName="pointersLayer">
                    <ttObject> <!-- automatic pointer -->
                        <ttImage>images/tools/handPointer.png</ttImage>
                        <ttRotate>20.34</ttRotate>
                        <ttBasePosition x="16.136" y="16.7535" />
                        <ttOpacity>0</ttOpacity>
                        <ttActionsGroup> <!-- blockForCloseMixing -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>blockForCloseMixing</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>makeInvisible</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>stopRunningActions</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup>
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpickBlack.hidePointer</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>makeInvisible</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>stopRunningActions</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixingMinigameStarted -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixingMinigameStarted</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.5</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>makeVisible</ttType>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="16.136" y="16.7535"  />
                                    <ttActionDuration>0</ttActionDuration>
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0</ttActionDuration>
                                    <ttActionRotateAngle>20.34</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>fadeTo</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                    <ttOpacity>255</ttOpacity>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttFinalPosition x="45.6584" y="25.7654" />
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttActionRotateAngle>-34.54</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttFinalPosition x="16.136" y="16.7535" />
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttActionRotateAngle>20.34</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttFinalPosition x="45.6584" y="25.7654"/>
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttActionRotateAngle>-34.54</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>fadeTo</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                    <ttOpacity>0</ttOpacity>
                                </ttAction>
                            </ttSequenceGroup>
							<ttSequenceGroup>
								<ttAction>
									<ttType>logEvent</ttType>
									<ttLogEventName>Level_4</ttLogEventName>
									<ttLogEventParam>Tool_Clicks</ttLogEventParam>
									<ttLogEventVal>GateUnlock_DragMinigame_1</ttLogEventVal>
								</ttAction>
							</ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- ingredients pointer -->
                        <ttImage>images/tools/handPointer.png</ttImage>
                        <ttRotate>-88.13</ttRotate>
                        <ttBasePosition x="40.3039" y="65.6134" />
                        <ttOpacity>0</ttOpacity>
                        <ttActionsGroup> <!-- blockForCloseMixing -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>blockForCloseMixing</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>makeInvisible</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>stopRunningActions</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- removeFirstPointer -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>removeFirstPointer</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>makeInvisible</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>stopRunningActions</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpart01.done -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpart01.done</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>makeVisible</ttType>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="40.3039" y="65.6134"  />
                                    <ttActionDuration>0</ttActionDuration>
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0</ttActionDuration>
                                    <ttActionRotateAngle>-88.13</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>fadeTo</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                    <ttOpacity>255</ttOpacity>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttFinalPosition x="45.6584" y="25.7654" />
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttActionRotateAngle>-34.54</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttFinalPosition x="40.3039" y="65.6134" />
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttActionRotateAngle>-88.13</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttFinalPosition x="45.6584" y="25.7654"/>
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttActionRotateAngle>-34.54</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>fadeTo</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                    <ttOpacity>0</ttOpacity>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                    <ttObject> <!-- finalazer pointer -->
                        <ttImage>images/tools/handPointer.png</ttImage>
                        <ttRotate>24.85</ttRotate>
                        <ttBasePosition x="18.8856" y="51.2812" />
                        <ttOpacity>0</ttOpacity>
                        <ttActionsGroup> <!-- blockForCloseMixing -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>blockForCloseMixing</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>makeInvisible</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>stopRunningActions</ttType>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- finalizer.enable -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>finalizer.enable</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>makeVisible</ttType>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttFinalPosition x="18.8856" y="51.2812"  />
                                    <ttActionDuration>0</ttActionDuration>
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>0</ttActionDuration>
                                    <ttActionRotateAngle>24.85</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>fadeTo</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                    <ttOpacity>255</ttOpacity>
                                </ttAction>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttFinalPosition x="45.6584" y="25.7654" />
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttActionRotateAngle>-34.54</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttFinalPosition x="18.8856" y="51.2812" />
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttActionRotateAngle>24.85</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>moveToPoint</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttFinalPosition x="45.6584" y="25.7654"/>
                                </ttAction>
                                <ttAction>
                                    <ttType>rotateTo</ttType>
                                    <ttActionDuration>1.25</ttActionDuration>
                                    <ttActionRotateAngle>-34.54</ttActionRotateAngle>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>fadeTo</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                    <ttOpacity>0</ttOpacity>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- hidePointer -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>hidePointer</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>fadeTo</ttType>
                                    <ttActionDuration>0.2</ttActionDuration>
                                    <ttOpacity>0</ttOpacity>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                </ttLayer>
                <ttLayer ttName="mixingBlockerLayer">
                    <ttObject> <!-- blocker -->
                        <ttImage>images/fullBlocker.png</ttImage>
                        <ttBasePosition x="0" y="0" />
                        <ttOpacity>0</ttOpacity>
                        <ttScale>1024</ttScale>
                        <ttActionsGroup> <!-- onTouchesBegan -->
                            <ttTrigger>onTouchesBegan</ttTrigger>
                            <ttSequenceGroup />
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- automatic -->
                            <ttTrigger>automatic</ttTrigger>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.6</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
							<ttSequenceGroup>
								<ttAction>
									<ttType>logEvent</ttType>
									<ttLogEventName>Level_4</ttLogEventName>
									<ttLogEventParam>Tool_Completed</ttLogEventParam>
									<ttLogEventVal>GateUnlock_DragMinigame_1</ttLogEventVal>
								</ttAction>
							</ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.wrongingredient.specific -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.wrongingredient.specific</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>1024</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.6</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.rightingredient.specific -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.rightingredient.specific</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>1024</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>2.6</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- lockpickBlack.enter -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>lockpickBlack.enter</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>1024</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>2</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.stagestart.1 -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.1</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>1024</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>2.6</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.stagestart.2 -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.2</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>1024</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>2.6</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.stagestart.3 -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.stagestart.3</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>1024</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>3</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup> <!-- mixing.finished -->
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>mixing.finished</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>6.8</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>1024</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>0.6</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup>
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>blockForCloseMixing</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>1024</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                        <ttActionsGroup>
                            <ttTrigger>notification</ttTrigger>
                            <ttNotificationIdentifyer>blockScreenForLaddle</ttNotificationIdentifyer>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>1024</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>delay</ttType>
                                    <ttActionDuration>6.8</ttActionDuration>
                                </ttAction>
                            </ttSequenceGroup>
                            <ttSequenceGroup>
                                <ttAction>
                                    <ttType>scale</ttType>
                                    <ttActionDuration>0.0</ttActionDuration>
                                    <ttScaleTo>0</ttScaleTo>
                                </ttAction>
                            </ttSequenceGroup>
                        </ttActionsGroup>
                    </ttObject>
                </ttLayer>
            </ttLayers>
        </ttLayer>
    </ttMacroBody>
</ttMacro>


<ttMacro name="pointerWelderAnimations">
    <ttMacroParams>
        <ttMacroParamDef name="$specificNotification"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttActionsGroup> <!-- welder.toolpickedup -->
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>welder.toolpickedup</ttNotificationIdentifyer>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>bringToFront</ttType>
                </ttAction>
                <ttAction>
                    <ttType>fadeIn</ttType>
                    <ttActionDuration>0</ttActionDuration>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>makeVisible</ttType>
                </ttAction>
                <ttAction>
                    <ttType>scaleXy</ttType>
                    <ttActionDuration>0.25</ttActionDuration>
                    <ttScaleX>0.9</ttScaleX>
                    <ttScaleY>0.9</ttScaleY>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                    <ttActionEaseRate>2.00</ttActionEaseRate>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>scaleXy</ttType>
                    <ttActionDuration>0.25</ttActionDuration>
                    <ttScaleX>1</ttScaleX>
                    <ttScaleY>1</ttScaleY>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                    <ttActionEaseRate>2.00</ttActionEaseRate>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>scaleXy</ttType>
                    <ttActionDuration>0.25</ttActionDuration>
                    <ttScaleX>0.9</ttScaleX>
                    <ttScaleY>0.9</ttScaleY>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                    <ttActionEaseRate>2.00</ttActionEaseRate>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>scaleXy</ttType>
                    <ttActionDuration>0.25</ttActionDuration>
                    <ttScaleX>1</ttScaleX>
                    <ttScaleY>1</ttScaleY>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                    <ttActionEaseRate>2.00</ttActionEaseRate>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>scaleXy</ttType>
                    <ttActionDuration>0.25</ttActionDuration>
                    <ttScaleX>0.9</ttScaleX>
                    <ttScaleY>0.9</ttScaleY>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                    <ttActionEaseRate>2.00</ttActionEaseRate>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>scaleXy</ttType>
                    <ttActionDuration>0.25</ttActionDuration>
                    <ttScaleX>1</ttScaleX>
                    <ttScaleY>1</ttScaleY>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                    <ttActionEaseRate>2.00</ttActionEaseRate>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>scaleXy</ttType>
                    <ttActionDuration>0.25</ttActionDuration>
                    <ttScaleX>0.9</ttScaleX>
                    <ttScaleY>0.9</ttScaleY>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                    <ttActionEaseRate>2.00</ttActionEaseRate>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>scaleXy</ttType>
                    <ttActionDuration>0.25</ttActionDuration>
                    <ttScaleX>1</ttScaleX>
                    <ttScaleY>1</ttScaleY>
                    <ttActionEaseMode>easeInOut</ttActionEaseMode>
                    <ttActionEaseRate>2.00</ttActionEaseRate>
                </ttAction>
                <ttAction>
                    <ttType>fadeOut</ttType>
                    <ttActionDuration>0.25</ttActionDuration>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup> <!-- welder.enter -->
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>welder.enter</ttNotificationIdentifyer>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>makeInvisible</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>stopRunningActions</ttType>                         
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup> <!-- welder.tooldropped -->
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>welder.tooldropped</ttNotificationIdentifyer>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>makeInvisible</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>stopRunningActions</ttType>                         
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup> <!-- $specificNotification -->
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>$specificNotification</ttNotificationIdentifyer>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>makeInvisible</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>moveToPoint</ttType>
                    <ttFinalPosition x="110" y="110" />
                    <ttActionEaseRate>3.00</ttActionEaseRate>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>stopRunningActions</ttType>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>
<ttMacro name="particlesWelderAnimations">
    <ttMacroParams>
        <ttMacroParamDef name="$posX"/>
        <ttMacroParamDef name="$posY"/>
        <ttMacroParamDef name="$specificNotification"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject><!-- particles welder 02 -->
            <ttImage>images/level04/bigMachine_scratch.png</ttImage>
            <ttType>particles</ttType>
            <ttBasePosition x="$posX" y="$posY" />
            <ttParticles>
                <ttParticlesPlist>images/particles/snowCureParticles.plist</ttParticlesPlist>
            </ttParticles>
            <ttActionsGroup>
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>$specificNotification</ttNotificationIdentifyer>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>scaleXy</ttType>
                        <ttActionDuration>0</ttActionDuration>
                        <ttScaleX>0.7</ttScaleX>
                        <ttScaleY>0.7</ttScaleY>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>startParticles</ttType>
                    </ttAction>
                    <ttAction>
                        <ttType>playSound</ttType>
                        <ttFile>sounds/particles_sparkle.mp3</ttFile>
                        <ttVolume>1</ttVolume>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
        </ttObject>
    </ttMacroBody>
</ttMacro>
<ttMacro name="welderAnimationEnhanced">
    <ttMacroParams>
        <ttMacroParamDef name="$moveX01"/>
        <ttMacroParamDef name="$moveY01"/>
        <ttMacroParamDef name="$moveX02"/>
        <ttMacroParamDef name="$moveY02"/>
        <ttMacroParamDef name="$holeVariable"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttActionsGroup>
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>welder.visit</ttNotificationIdentifyer>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>stopRunningActions</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>sendNotification</ttType>
                    <ttNotificationIdentifyer>showWelderAnimation</ttNotificationIdentifyer>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup>
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>showWelderAnimation02</ttNotificationIdentifyer>
            <ttOperator>
                <ttScript>return (whichHole == $holeVariable)</ttScript>
            </ttOperator>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>sendNotification</ttType>
                    <ttNotificationIdentifyer>checkFlip</ttNotificationIdentifyer>
                </ttAction>
                <ttAction>
                    <ttType>disableObject</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>setVariable</ttType>
                    <ttVariable>canIMoveWelder</ttVariable>
                    <ttOperator>
                        <ttScript>return 0</ttScript>
                    </ttOperator>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>playSound</ttType>
                    <ttFile>sounds/toolsSFX/welder.mp3</ttFile>
                    <ttVolume>1</ttVolume>
                </ttAction>
                <ttAction>
                    <ttType>moveToPoint</ttType>
                    <ttFinalPosition x="$moveX01" y="$moveY01" />
                    <ttActionDuration>0.1</ttActionDuration>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup> 
                <ttAction>
                    <ttType>moveToPoint</ttType>
                    <ttFinalPosition x="$moveX02" y="$moveY02" />
                    <ttActionDuration>1</ttActionDuration>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>stopSound</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttMacroInvoke macro_name="toolsEndedAnimation">
                <ttMacroParam name="$finalX" value="37.6266"/>
                <ttMacroParam name="$finalY" value="5.86319"/>
                <ttMacroParam name="$scaleX" value="1"/>
                <ttMacroParam name="$scaleY" value="1"/>
            </ttMacroInvoke>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>sendNotification</ttType>
                    <ttNotificationIdentifyer>welderIsBack</ttNotificationIdentifyer>
                </ttAction>
                <ttAction>
                    <ttType>flipXNo</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>moveObjectToLayer</ttType>
                    <ttLayerName>secondSetTools</ttLayerName>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>enableObject</ttType>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>setVariable</ttType>
                    <ttVariable>welderInPlace</ttVariable>
                    <ttOperator>
                        <ttScript>return 0</ttScript>
                    </ttOperator>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>setVariable</ttType>
                    <ttVariable>holeVisited</ttVariable>
                    <ttOperator>
                        <ttScript>return 0</ttScript>
                    </ttOperator>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>sendNotification</ttType>
                    <ttNotificationIdentifyer>welder.check</ttNotificationIdentifyer>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup> <!-- checkFlip -->
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>checkFlip</ttNotificationIdentifyer>
            <ttOperator>
                <ttScript>return (whichHole == 3)</ttScript>
            </ttOperator>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>flipXYes</ttType>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>

<ttMacro name="playElectricSound">
    <ttMacroBody>
        <ttActionsGroup>
            <ttTrigger>onTouchesMoved</ttTrigger>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>playSound</ttType>
                    <ttFile>sounds/toolsSFX/mini_game_electricity1.mp3</ttFile>
                    <ttFile>sounds/toolsSFX/mini_game_electricity2.mp3</ttFile>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>delay</ttType>
                    <ttActionDuration>1.8</ttActionDuration>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
        <ttActionsGroup>
            <ttTrigger>onTouchesEnded</ttTrigger>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>delay</ttType>
                    <ttActionDuration>0.5</ttActionDuration>
                </ttAction>
            </ttSequenceGroup>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>stopSound</ttType>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>

<ttMacro name="dressUpMenuItemBulbs">
    <ttMacroParams>
        <ttMacroParamDef name="$itemId"/>
        <ttMacroParamDef name="$image"/>
        <ttMacroParamDef name="$data"/>
        <ttMacroParamDef name="$bulbNo"/>
        <ttMacroParamDef name="$categoryName"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttType>menuItem</ttType>
            <ttId>$itemId</ttId>
            <ttImage>$image</ttImage>
            <ttScale>1.195</ttScale>
            <ttVisible>no</ttVisible>
            <ttActionsGroup>
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendMessageToController</ttType>
                        <ttControllerName>dressUp</ttControllerName>
                        <ttMessage>setItem</ttMessage>
                        <ttMessageParams>$categoryName</ttMessageParams>
                        <ttMessageParams>$data</ttMessageParams>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>countItems</ttVariable>
                        <ttOperator>
                            <ttScript>return (countItems + 1)</ttScript>
                        </ttOperator>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>bulbColor</ttVariable>
                        <ttOperator>
                            <ttScript>return $bulbNo</ttScript>
                        </ttOperator>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>markBulb</ttVariable>
                        <ttOperator>
                            <ttScript>return 1</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>playDuSound</ttNotificationIdentifyer>
                    </ttAction>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>bulbChanged</ttNotificationIdentifyer>
                    </ttAction>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>bulbPopup.close</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
        </ttObject>
    </ttMacroBody>
</ttMacro>
<ttMacro name="dressUpMenuItemBulbsLocked">
    <ttMacroParams>
        <ttMacroParamDef name="$itemId"/>
        <ttMacroParamDef name="$image"/>
        <ttMacroParamDef name="$data"/>
        <ttMacroParamDef name="$bulbNo"/>
        <ttMacroParamDef name="$categoryName"/>
        <ttMacroParamDef name="$bulbVarRV"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttType>menuItem</ttType>
            <ttId>$itemId</ttId>
            <ttImage>$image</ttImage>
            <ttVisible>no</ttVisible>
            <ttObjects>
                <ttObject>
                    <ttImage>images/iconsUI/lock.png</ttImage>
                    <ttBasePosition x="-1" y="-1" />
                    <ttZOrder>10</ttZOrder>
                    <ttEnabled>yes</ttEnabled>
                    <ttActionsGroup>
                        <ttTrigger>automatic</ttTrigger>
                        <ttOperator>
                            <ttScript>return (inAppProduct_decorations == 0)</ttScript>
                        </ttOperator>
                        <ttSequenceGroup>
                            <ttAction>
                                <ttType>makeVisible</ttType>
                            </ttAction>
                            <ttAction>
                                <ttType>scaleXy</ttType>
                                <ttActionDuration>0</ttActionDuration>
                                <ttScaleX>1</ttScaleX>
                                <ttScaleY>1</ttScaleY>
                            </ttAction>
                        </ttSequenceGroup>
                    </ttActionsGroup>
                    <ttActionsGroup>
                        <ttTrigger>notification</ttTrigger>
                        <ttNotificationIdentifyer>script: return "$bulbVarRV".."Success"</ttNotificationIdentifyer>
                        <ttSequenceGroup>
                            <ttAction>
                                <ttType>scale</ttType>
                                <ttActionDuration>0</ttActionDuration>
                                <ttScaleTo>0</ttScaleTo>
                            </ttAction>
                        </ttSequenceGroup>
                    </ttActionsGroup>
                    <ttActionsGroup>
                        <ttTrigger>automatic</ttTrigger>
                        <ttOperator>
                            <ttScript>return (inAppProduct_decorations == 1)</ttScript>
                        </ttOperator>
                        <ttSequenceGroup>
                            <ttAction>
                                <ttType>scale</ttType>
                                <ttScaleTo>0</ttScaleTo>
                            </ttAction>
                            <ttAction>
                                <ttType>moveToPoint</ttType>
                                <ttFinalPosition x="10" y="150" />
                                <ttActionDuration>0</ttActionDuration>
                            </ttAction>
                        </ttSequenceGroup>
                    </ttActionsGroup>
                    <ttActionsGroup>
                        <ttTrigger>notification</ttTrigger>
                        <ttNotificationIdentifyer>2034</ttNotificationIdentifyer>
                        <ttOperator>
                            <ttScript>return (inAppProduct_decorations == 1)</ttScript>
                        </ttOperator>
                        <ttSequenceGroup>
                            <ttAction>
                                <ttType>makeInvisible</ttType>
                            </ttAction>
                            <ttAction>
                                <ttType>scaleXy</ttType>
                                <ttActionDuration>0</ttActionDuration>
                                <ttScaleX>0</ttScaleX>
                                <ttScaleY>0</ttScaleY>
                            </ttAction>
                        </ttSequenceGroup>
                    </ttActionsGroup>
                </ttObject>
            </ttObjects>
            <ttActionsGroup><!-- onMenuSelected bulb bought-->
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return (inAppProduct_decorations == 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendMessageToController</ttType>
                        <ttControllerName>dressUp</ttControllerName>
                        <ttMessage>setItem</ttMessage>
                        <ttMessageParams>$categoryName</ttMessageParams>
                        <ttMessageParams>$data</ttMessageParams>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>countItems</ttVariable>
                        <ttOperator>
                            <ttScript>return (countItems + 1)</ttScript>
                        </ttOperator>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>bulbColor</ttVariable>
                        <ttOperator>
                            <ttScript>return $bulbNo</ttScript>
                        </ttOperator>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>markBulb</ttVariable>
                        <ttOperator>
                            <ttScript>return 1</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>playDuSound</ttNotificationIdentifyer>
                    </ttAction>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>bulbChanged</ttNotificationIdentifyer>
                    </ttAction>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>bulbPopup.close</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>  
            <ttActionsGroup><!-- onMenuSelected bulb unlocked-->
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return (inAppProduct_decorations == 0 and $bulbVarRV == 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendMessageToController</ttType>
                        <ttControllerName>dressUp</ttControllerName>
                        <ttMessage>setItem</ttMessage>
                        <ttMessageParams>$categoryName</ttMessageParams>
                        <ttMessageParams>$data</ttMessageParams>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>countItems</ttVariable>
                        <ttOperator>
                            <ttScript>return (countItems + 1)</ttScript>
                        </ttOperator>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>bulbColor</ttVariable>
                        <ttOperator>
                            <ttScript>return $bulbNo</ttScript>
                        </ttOperator>
                    </ttAction>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>markBulb</ttVariable>
                        <ttOperator>
                            <ttScript>return 1</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>playDuSound</ttNotificationIdentifyer>
                    </ttAction>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>bulbChanged</ttNotificationIdentifyer>
                    </ttAction>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>bulbPopup.close</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>  
            <ttActionsGroup><!-- onMenuSelected bulb locked-->
                <ttTrigger>onMenuSelected</ttTrigger>
                <ttOperator>
                    <ttScript>return (inAppProduct_decorations == 0 and $bulbVarRV ~= 1)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>whichBulbWatchesRV</ttVariable>
                        <ttOperator>
                            <ttScript>return $bulbNo</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>loadDecorationsStoreLayer</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>     
            <ttActionsGroup>
                <ttTrigger>notification</ttTrigger>
                <ttNotificationIdentifyer>rewardedAdShowSuccess</ttNotificationIdentifyer>
                <ttOperator>
                    <ttScript>return (whichBulbWatchesRV == $bulbNo)</ttScript>
                </ttOperator>
                <ttSequenceGroup>
                   <ttAction>
                        <ttType>setVariable</ttType>
                        <ttVariable>$bulbVarRV</ttVariable>
                        <ttOperator>
                            <ttScript>return 1</ttScript>
                        </ttOperator>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>unloadDecorationsStoreLayer</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
                <ttSequenceGroup>
                    <ttAction>
                        <ttType>sendNotification</ttType>
                        <ttNotificationIdentifyer>script: return "$bulbVarRV".."Success"</ttNotificationIdentifyer>
                    </ttAction>
                </ttSequenceGroup>
            </ttActionsGroup>
        </ttObject>
    </ttMacroBody>
</ttMacro>
<ttMacro name="dressUpItemsSliderBulbs">
    <ttMacroParams>
        <ttMacroParamDef name="$name"/>
        <ttMacroParamDef name="$objectsId"/>
        <ttMacroParamDef name="$categoryNo"/>
        <ttMacroParamDef name="$categoryName"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttObject>
            <ttSoundList></ttSoundList>
            <ttSoundList></ttSoundList>
            <ttSoundList></ttSoundList>
            <ttType>dressUpSliderObject</ttType>
            <ttImage>dressUpSliderObject</ttImage>
            <ttMoveUpOrLeftNotification>moveItemsSliderUp</ttMoveUpOrLeftNotification>
            <ttMoveDownOrRightNotification>moveItemsSliderDown</ttMoveDownOrRightNotification>
            <ttName>$name</ttName>
            <ttCategoryName>$categoryName</ttCategoryName>
            <ttBasePosition x="16" y="-3"/>
            <ttMenuWidth>68</ttMenuWidth>
            <ttMenuHeight>10</ttMenuHeight>
            <ttObjectsIdList>$objectsId</ttObjectsIdList>
            <ttIsLooped>no</ttIsLooped>
            <ttMovingSpeed>7</ttMovingSpeed>
            <ttFriction>0</ttFriction>
            <ttNumberOfItemInRow>2.7</ttNumberOfItemInRow>
            <ttNumberOfItemInCol>1</ttNumberOfItemInCol>
            <ttIsHorizontal>YES</ttIsHorizontal>
            <ttMacroInvoke macro_name="dressUpCategoryActions">
            <ttMacroParam name="$categoryNo" value="$categoryNo"/>
            </ttMacroInvoke>
        </ttObject>
    </ttMacroBody>
</ttMacro>

<ttMacro name="setLightColorActions">
    <ttMacroParams>
        <ttMacroParamDef name="$bulbColorVariable"/>
        <ttMacroParamDef name="$redPercent"/>
        <ttMacroParamDef name="$greenPercent"/>
        <ttMacroParamDef name="$bluePercent"/>
    </ttMacroParams>
    <ttMacroBody>
        <ttActionsGroup> <!-- bulbPopup.close -->
            <ttTrigger>notification</ttTrigger>
            <ttNotificationIdentifyer>bulbPopup.close</ttNotificationIdentifyer>
            <ttOperator>
                <ttScript>return (bulbColor == $bulbColorVariable)</ttScript>
            </ttOperator>
            <ttSequenceGroup>
                <ttAction>
                    <ttType>color</ttType>
                    <ttRedPercentage>$redPercent</ttRedPercentage>  
                    <ttGreenPercentage>$greenPercent</ttGreenPercentage> 
                    <ttBluePercentage>$bluePercent</ttBluePercentage>
                    <ttActionDuration>0</ttActionDuration>
                </ttAction>
            </ttSequenceGroup>
        </ttActionsGroup>
    </ttMacroBody>
</ttMacro>